(this["webpackJsonphosting-ui"]=this["webpackJsonphosting-ui"]||[]).push([[15],{354:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var s,i=a(24),r=a(1),n=a(355),o=a.n(n),l=a(3);!function(e){e.Default="default",e.Destructive="destructive"}(s||(s={})),t.b=function(e){var t=Object(r.useState)(e.variant||s.Default),a=Object(i.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){e.variant&&c(e.variant)}),[e.variant]),Object(l.jsxs)("div",{className:o.a.info_text_group+(e.className?" "+e.className:""),children:[Object(l.jsx)("div",{className:o.a.info_bar+" "+o.a["variant-"+n]}),Object(l.jsx)("div",{className:o.a.info_text,children:e.children})]})}},355:function(e,t,a){e.exports={"variant-default":"InfoBarText_variant-default__1LELi","variant-destructive":"InfoBarText_variant-destructive__1RhKn",info_text_group:"InfoBarText_info_text_group__3EOed",info_bar:"InfoBarText_info_bar__1rZ80",info_text:"InfoBarText_info_text__2bpXy"}},361:function(e,t,a){},362:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s,i=a(1),r=["title","titleId"];function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n.apply(this,arguments)}function o(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function l(e,t){var a=e.title,l=e.titleId,c=o(e,r);return i.createElement("svg",n({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},c),a?i.createElement("title",{id:l},a):null,s||(s=i.createElement("path",{d:"M7.60703 3.75L9.74102 5.88398C9.97539 6.11836 10.2934 6.25 10.625 6.25H18.125C18.4703 6.25 18.75 6.52969 18.75 6.875V15.625C18.75 15.9703 18.4703 16.25 18.125 16.25H1.875C1.52969 16.25 1.25 15.9703 1.25 15.625V4.375C1.25 4.02969 1.52969 3.75 1.875 3.75H7.60703ZM1.875 2.5C0.839453 2.5 0 3.33945 0 4.375V15.625C0 16.6605 0.839453 17.5 1.875 17.5H18.125C19.1605 17.5 20 16.6605 20 15.625V6.875C20 5.83945 19.1605 5 18.125 5H10.625L8.49102 2.86602C8.25664 2.63164 7.93867 2.5 7.60703 2.5H1.875Z",fill:"#282A35"})))}var c=i.forwardRef(l);a.p},373:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s,i,r=a(1),n=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},o.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function c(e,t){var a=e.title,c=e.titleId,d=l(e,n);return r.createElement("svg",o({fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},d),a?r.createElement("title",{id:c},a):null,s||(s=r.createElement("g",{clipPath:"url(#a)",fill:"#282A35",fillOpacity:.6},r.createElement("path",{d:"M14 1C14.2652 1 14.5196 1.10536 14.7071 1.29289C14.8946 1.48043 15 1.73478 15 2V14C15 14.2652 14.8946 14.5196 14.7071 14.7071C14.5196 14.8946 14.2652 15 14 15H2C1.73478 15 1.48043 14.8946 1.29289 14.7071C1.10536 14.5196 1 14.2652 1 14V2C1 1.73478 1.10536 1.48043 1.29289 1.29289C1.48043 1.10536 1.73478 1 2 1H14ZM2 0C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2L0 14C0 14.5304 0.210714 15.0391 0.585786 15.4142C0.960859 15.7893 1.46957 16 2 16H14C14.5304 16 15.0391 15.7893 15.4142 15.4142C15.7893 15.0391 16 14.5304 16 14V2C16 1.46957 15.7893 0.960859 15.4142 0.585786C15.0391 0.210714 14.5304 0 14 0L2 0Z"}),r.createElement("path",{d:"M4 8C4 7.86739 4.05268 7.74021 4.14645 7.64645C4.24021 7.55268 4.36739 7.5 4.5 7.5H11.5C11.6326 7.5 11.7598 7.55268 11.8536 7.64645C11.9473 7.74021 12 7.86739 12 8C12 8.13261 11.9473 8.25979 11.8536 8.35355C11.7598 8.44732 11.6326 8.5 11.5 8.5H4.5C4.36739 8.5 4.24021 8.44732 4.14645 8.35355C4.05268 8.25979 4 8.13261 4 8Z"}))),i||(i=r.createElement("defs",null,r.createElement("clipPath",{id:"a"},r.createElement("rect",{width:16,height:16,fill:"#fff"})))))}var d=r.forwardRef(c);a.p},374:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s,i,r=a(1),n=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},o.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function c(e,t){var a=e.title,c=e.titleId,d=l(e,n);return r.createElement("svg",o({fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},d),a?r.createElement("title",{id:c},a):null,s||(s=r.createElement("g",{clipPath:"url(#a)",fill:"#282A35",fillOpacity:.6},r.createElement("path",{d:"M14 1C14.2652 1 14.5196 1.10536 14.7071 1.29289C14.8946 1.48043 15 1.73478 15 2V14C15 14.2652 14.8946 14.5196 14.7071 14.7071C14.5196 14.8946 14.2652 15 14 15H2C1.73478 15 1.48043 14.8946 1.29289 14.7071C1.10536 14.5196 1 14.2652 1 14V2C1 1.73478 1.10536 1.48043 1.29289 1.29289C1.48043 1.10536 1.73478 1 2 1H14ZM2 0C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2L0 14C0 14.5304 0.210714 15.0391 0.585786 15.4142C0.960859 15.7893 1.46957 16 2 16H14C14.5304 16 15.0391 15.7893 15.4142 15.4142C15.7893 15.0391 16 14.5304 16 14V2C16 1.46957 15.7893 0.960859 15.4142 0.585786C15.0391 0.210714 14.5304 0 14 0L2 0Z"}),r.createElement("path",{d:"M8 4C8.13261 4 8.25979 4.05268 8.35355 4.14645C8.44732 4.24021 8.5 4.36739 8.5 4.5V7.5H11.5C11.6326 7.5 11.7598 7.55268 11.8536 7.64645C11.9473 7.74021 12 7.86739 12 8C12 8.13261 11.9473 8.25979 11.8536 8.35355C11.7598 8.44732 11.6326 8.5 11.5 8.5H8.5V11.5C8.5 11.6326 8.44732 11.7598 8.35355 11.8536C8.25979 11.9473 8.13261 12 8 12C7.86739 12 7.74021 11.9473 7.64645 11.8536C7.55268 11.7598 7.5 11.6326 7.5 11.5V8.5H4.5C4.36739 8.5 4.24021 8.44732 4.14645 8.35355C4.05268 8.25979 4 8.13261 4 8C4 7.86739 4.05268 7.74021 4.14645 7.64645C4.24021 7.55268 4.36739 7.5 4.5 7.5H7.5V4.5C7.5 4.36739 7.55268 4.24021 7.64645 4.14645C7.74021 4.05268 7.86739 4 8 4Z"}))),i||(i=r.createElement("defs",null,r.createElement("clipPath",{id:"a"},r.createElement("rect",{width:16,height:16,fill:"#fff"})))))}var d=r.forwardRef(c);a.p},382:function(e,t,a){},383:function(e,t,a){"use strict";var s=a(13),i=a(20),r=a(121),n=a(122),o=a(123),l=a(124),c=a(1),d=a.n(c),p=a(25),u=a(50),h=a(83),f=a(28),b=a(21),j=a(19),m=a(6),O=a(46),v=a(125),_=a(3),g=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).fetchImagePublicUrl=Object(i.a)(Object(s.a)().mark((function e(){var t,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.m(n.props.file,n.props.main_state);case 2:if(t=e.sent,m.n.logDebug("ImagePreviewModal -> FileUtil.getSignedFilePreviewUrlResponse -> file_signed_url_req_res: ",t),"undefined"!==typeof(a=t.data)._update_main_state&&n.props.updateMainBulkState(a._update_main_state),"undefined"!==typeof a._update_space&&null!==a._update_space&&n.props.updateSpace(a._update_space),"0"===t.error.code){e.next=11;break}return n.props.addNotification({id:Object(p.e)(),dismissed:!1,type:"error",header:"File processing error",body:"".concat(t.error.description)}),n.props.close(),e.abrupt("return");case 11:n.isImage?n.setState({file_public_url:t.data.url}):n.setState({loading:!1,file_public_url:t.data.url,image_loaded:!0});case 12:case"end":return e.stop()}}),e)}))),n.state={loading:!0,image_loaded:!1,file_public_url:""},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.fetchImagePublicUrl()}},{key:"isAudio",get:function(){return this.props.file&&this.props.file.mime_type===u.c.mp3||!1}},{key:"isVideo",get:function(){return this.props.file&&this.props.file.mime_type===u.c.mp4||!1}},{key:"isImage",get:function(){return!this.isAudio&&!this.isVideo}},{key:"render",value:function(){var e=this;return Object(_.jsxs)(v.a,{show:!!this.props.show,className:"w3s-preview-image-modal",size:"lg",title:this.props.file?u.o(this.props.file.base_name):"",handleClose:this.props.close,displayCancel:!1,displayOk:!1,children:[this.state.loading&&Object(_.jsx)(h.a,{}),this.state.file_public_url&&Object(_.jsxs)("div",{style:{display:this.state.image_loaded?"block":"none",position:this.state.image_loaded?"relative":"absolute"},children:[this.isImage&&Object(_.jsx)("img",{src:this.props.file?this.state.file_public_url:"",alt:this.props.file?u.o(this.props.file.base_name):"",style:{maxWidth:"100%",maxHeight:"100%"},onLoad:function(){return e.setState({loading:!1,image_loaded:!0})}}),this.isAudio&&Object(_.jsxs)("audio",{controls:!0,autoPlay:!0,children:[Object(_.jsx)("source",{src:this.props.file?this.state.file_public_url:"",type:"audio/mpeg"}),"Your browser does not support the audio tag."]}),this.isVideo&&Object(_.jsxs)("video",{controls:!0,autoPlay:!0,style:{maxWidth:"100%"},children:[Object(_.jsx)("source",{src:this.props.file?this.state.file_public_url:"",type:"video/mp4"}),"Your browser does not support the video tag."]})]})]})}}]),a}(d.a.Component);t.a=Object(j.b)((function(e){return{main_state:e.main}}),(function(e){return Object(b.bindActionCreators)({addNotification:f.a,updateMainBulkState:O.q,updateSpace:O.r},e)}))(g)},407:function(e,t,a){},445:function(e,t,a){e.exports={rename_file_modal:"RenameFileModal_rename_file_modal__3B4kh",info_text_group:"RenameFileModal_info_text_group__3C3zY",info_bar:"RenameFileModal_info_bar__8cHiQ",info_text_subgroup:"RenameFileModal_info_text_subgroup__1m7tI",info_text:"RenameFileModal_info_text__2PBjw",file_type_group:"RenameFileModal_file_type_group__OSvWM",extension_item:"RenameFileModal_extension_item__2g4V5"}},446:function(e,t,a){e.exports={new_file_modal:"NewFileModal_new_file_modal__1QuB4",file_type_group:"NewFileModal_file_type_group__3BaYm",file_type_item:"NewFileModal_file_type_item__1lUyx",form_control_group:"NewFileModal_form_control_group__E3QFu",extension_text:"NewFileModal_extension_text__flHDE",more_info_link:"NewFileModal_more_info_link__1d3Cg"}},447:function(e,t,a){e.exports={outer_border:"FileTypeItem_outer_border__2FS0w",selected:"FileTypeItem_selected__xB-wi",file_type_item:"FileTypeItem_file_type_item__3znsv",disabled:"FileTypeItem_disabled__3xxjP",selected_icon:"FileTypeItem_selected_icon__djiJk",selected_group:"FileTypeItem_selected_group__39BJ0",header:"FileTypeItem_header__JSUdD",description:"FileTypeItem_description__2nIb3"}},448:function(e,t,a){e.exports={new_folder_modal:"NewFolderModal_new_folder_modal__3vaae"}},449:function(e,t,a){},450:function(e,t,a){},451:function(e,t,a){},459:function(e,t,a){},834:function(e,t,a){"use strict";a.r(t);var s,i=a(35),r=a(13),n=a(20),o=a(121),l=a(122),c=a(123),d=a(124),p=a(1),u=a.n(p),h=a(350),f=a(345),b=a(363),j=a(452),m=a(824),O=a(825),v=a(25),_=a(7),g=a(131),x=a(803),y=a(12),w=(a(407),a(21)),C=a(28),N=a(82),S=a(46),k=a(19),F=a(50),E=a(6),M=a(176),I=a.n(M),P=a(342),D=a(57),L=a(337),T=a(3),A=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handleDropRejected=function(e){E.n.logDebug("handleDrop > fileRejections:",e),s.setState({dragging:!1});var t=!1;e.forEach((function(e){var a;if(e.errors.length>0&&(a=e.errors[0]),a)if("file-invalid-type"===a.code){var i=e.file.name.split("."),r=i[i.length-1].toLowerCase();"free"===s.props.main_state.subscription_plan.name&&F.d[r]&&!F.e[r]?t||(t=!0,s.props.addModal({id:Object(v.e)(),dismissed:!1,type:"error",header:Object(T.jsx)(T.Fragment,{children:"Upgrade to add more file types"}),body:"The file type .".concat(r," is only supported on our paid plans. Upgrade your plan, if you want to unlock more file types for your space."),learnMoreButtonText:"Learn more",upgradeButtonText:"Upgrade"})):s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"File upload failed.",body:"The file ".concat(F.o(e.file.name)," could not be uploaded. ").concat(e.errors[0].message),filename:e.file.name})}else s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"File upload failed.",body:"Unknown error",filename:e.file.name});else s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"File upload failed.",body:"Unknown error",filename:e.file.name})}))},s.showCommonUploadErrorToast=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t,a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.n.logDebug("showCommonUploadErrorToast -> error_description, toast_id: ",t,a),void 0!==a?(s.props.updateNotification({id:a,type:"error",header:"Upload error",body:t}),setTimeout((function(){return s.props.dismissNotification({id:a})}),4e3)):s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"Upload error",body:t});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.handleFileUpload=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var a,i,n,o,l,c,d,p,u,h,f,b,j,m,O,_,g,x;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.n.logDebug("handleFileUpload -> file: ",t.file),n={"error.code":"0","error.description":"","error.context":""},s.props.setProcessingStatus(t.file,y.a.Active),t.file.processing_status=y.a.Active,t.file.path=s.props.active_path+t.file.base_name,t.file.rel_path=t.file.path.split("/").slice(1).join("/"),e.next=8,F.g(t.file,s.props.main_state);case 8:if("undefined"!==typeof(o=e.sent).data._update_main_state&&s.props.updateMainBulkState(o.data._update_main_state),"undefined"!==typeof o.data._update_space&&null!==o.data._update_space&&s.props.updateSpace(o.data._update_space),"0"===(null===(a=o.error)||void 0===a?void 0:a.code)){e.next=20;break}if(n["error.code"]=null===(l=o.error)||void 0===l?void 0:l.code,n["error.description"]=null===(c=o.error)||void 0===c?void 0:c.description,n["error.context"]=(null===(d=o.error)||void 0===d?void 0:d.context)||"generic","quota"!==n["error.context"]){e.next=18;break}return s.props.addQuotaError(o.error,t.file),e.abrupt("return",n);case 18:return s.showCommonUploadErrorToast(n["error.description"]),e.abrupt("return",n);case 20:return p=o.data.url,s.props.updateNotification({id:t.toastId,dismissed:!1,autohide:!1,closeButton:!1,type:"success",header:"Uploading file",body:"",filename:"".concat(F.o(t.file.base_name)),showProgressBar:!0,progressBarLevel:0}),e.next=24,F.r(p,t.file,t.toastId,(function(e){var a=Math.round(100*e.loaded/e.total);100===a&&(a=99),s.props.updateNotification({id:t.toastId,progressBarLevel:a})}));case 24:if(u=e.sent,E.n.logDebug("file_upload_req_res: ",u),"undefined"===typeof u||!("0"!==u.error.code||u.status<200||u.status>=300)){e.next=35;break}return n["error.code"]="SSOFUF_".concat(u.error.code),n["error.description"]=u.error.description,n["error.context"]="generic",h={id:Object(v.e)(),dismissed:!1,type:"error",header:"File could not be uploaded",body:Object(T.jsxs)(T.Fragment,{children:["Sorry, the file ",Object(T.jsx)("strong",{children:F.o(t.file.base_name)})," could not be uploaded. Error details: [",n["error.code"],"] ",n["error.description"],". Please contact support if the problem persists."]})},s.props.dismissNotification({id:t.toastId}),s.props.addNotification(h),s.props.setProcessingStatus(t.file,y.a.Error,h.body),e.abrupt("return",n);case 35:return e.next=37,F.q(t.file,s.props.main_state);case 37:if("undefined"!==typeof(f=e.sent).data._update_main_state&&s.props.updateMainBulkState(f.data._update_main_state),"undefined"!==typeof f.data._update_space&&null!==f.data._update_space&&s.props.updateSpace(f.data._update_space),"0"===(null===(i=f.error)||void 0===i?void 0:i.code)){e.next=48;break}return n["error.code"]=null===(b=f.error)||void 0===b?void 0:b.code,n["error.description"]=null===(j=f.error)||void 0===j?void 0:j.description,n["error.context"]=null!==(m=f.error)&&void 0!==m&&m.context?null===(O=f.error)||void 0===O?void 0:O.context:"generic","quota"===n["error.context"]?("SPACE_FILE_SIZE_QUOTA_EXCEEDED"===n["error.code"]&&(n["error.context"]="quota_soft"),_=s.props.addQuotaError(f.error,t.file)):"BRIFC2"===n["error.code"]?(g={id:Object(v.e)(),dismissed:!1,type:"error",header:"File could not be uploaded",body:Object(T.jsxs)(T.Fragment,{children:["Sorry, the file ",Object(T.jsx)("strong",{children:F.o(t.file.base_name)})," could not be uploaded. This is a permanent error with code ",n["error.code"],". Please contact support."]})},_=g.body,s.props.addNotification(g)):(x={id:Object(v.e)(),dismissed:!1,type:"error",header:"File could not be uploaded",body:Object(T.jsxs)(T.Fragment,{children:["Sorry, the file ",Object(T.jsx)("strong",{children:F.o(t.file.base_name)})," could not be uploaded. Error details: [",n["error.code"],"] ",n["error.description"],". Please contact support if the problem persists."]})},_=x.body,s.props.addNotification(x)),s.props.dismissNotification({id:t.toastId}),s.props.setProcessingStatus(t.file,y.a.Error,_),e.abrupt("return",n);case 48:return s.props.updateNotification({id:t.toastId,header:"File uploaded",body:Object(T.jsxs)("div",{className:"w3s-notif-upload-success-text",children:["File ",Object(T.jsx)("strong",{children:F.o(t.file.base_name)})," uploaded successfully"]}),showProgressBar:!0,progressBarLevel:100,filename:t.file.base_name}),setTimeout((function(){return s.props.dismissNotification({id:t.toastId})}),4e3),F.k(f.data.file,s.props.space.id).path!==t.file.path&&s.props.deleteFileUploaded(t.file),e.abrupt("return",n);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleFilesUpload=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var a,i,n,o,l,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,(i=t.map((function(e){return{toastId:Object(v.e)(),file:e}}))).forEach((function(e){s.props.addNotification({id:e.toastId,dismissed:!1,autohide:!1,closeButton:!1,type:"success",header:"Uploading file",body:"",filename:"".concat(F.o(e.file.base_name)),showProgressBar:!0,progressBarLevel:0})})),n=Object(g.a)(i),e.prev=4,n.s();case 6:if((o=n.n()).done){e.next=20;break}if(l=o.value,!a){e.next=13;break}s.props.deleteFileUploaded(l.file),s.props.dismissNotification({id:l.toastId}),e.next=18;break;case 13:return e.next=15,s.handleFileUpload(l);case 15:c=e.sent,E.n.logDebug("handleFilesUpload -> file, file_upload_response: ",l.file,c),"0"!==c["error.code"]&&"quota"===c["error.context"]&&(a=!0);case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),n.e(e.t0);case 25:return e.prev=25,n.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),s.handleDropAccepted=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var a,n,o,l,c,d,p,u,h,f,b,j,m,O;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.n.logDebug("handleDropAccepted -> accepted_files: ",t),s.setState({dragging:!1}),"0"===(a=P.c(s.props.main_state,s.props.space,"file")).code){e.next=6;break}return"quota"===a.context?s.props.addQuotaError(a):s.props.addModal({id:Object(v.e)(),dismissed:!1,type:"error",header:Object(T.jsx)(T.Fragment,{children:"Space temporarily closed"}),body:Object(T.jsx)(T.Fragment,{children:a.description}),dismissButtonText:"Got it"}),e.abrupt("return");case 6:if(n=s.props.main_state.subscription_plan,o=s.props.main_state.quota,l=s.props.main_state.usage,t=t.map((function(e){return new File([e],e.name.replace(/\s/g,"_"),{type:e.type,lastModified:e.lastModified})})),0!==(c=t.filter((function(e){var t=F.s(e.name,void 0,void 0,s.props.main_state.subscription_plan.name,e.type);return t?(s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"Invalid file name",body:"".concat(t," (").concat(e.name,")"),filename:e.name}),!1):!(e.size/1024>o.storage.max_file_size)||(s.props.addQuotaError({code:"SPACE_FILE_SIZE_QUOTA_EXCEEDED"},F.l(e,s.props.space.id,!1)),!1)}))).length){e.next=13;break}return e.abrupt("return",!1);case 13:if(d=Object(D.b)(o.storage.amount),p=c.map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),!(l.storage.amount+p/1024>o.storage.amount)){e.next=19;break}return n.can_be_upgraded?s.props.addModal({id:Object(v.e)(),dismissed:!1,type:"error",header:Object(T.jsx)(T.Fragment,{children:"Your storage is full"}),body:Object(T.jsxs)(T.Fragment,{children:["You have reached the ",Object(T.jsx)("strong",{children:d})," storage limit on the ",Object(T.jsx)("strong",{children:n.cname})," plan. To add more storage you can either upgrade to a bigger plan - or delete some files to free up storage."]}),learnMoreButtonText:"Learn more",upgradeButtonText:"Upgrade"}):s.props.addModal({id:Object(v.e)(),dismissed:!1,type:"error",header:Object(T.jsx)(T.Fragment,{children:"Your storage is full"}),body:Object(T.jsxs)(T.Fragment,{children:["You have reached the ",Object(T.jsx)("strong",{children:d})," storage limit on the ",Object(T.jsx)("strong",{children:n.cname})," plan. Delete some files to free up storage."]}),dismissButtonText:"Got it"}),e.abrupt("return");case 19:if(u=s.props.space.files,h=[],void 0!==u&&(h=u.map((function(e){return e.path}))),s.props.files_uploaded.length>0&&(f=h).push.apply(f,Object(i.a)(s.props.files_uploaded.map((function(e){return e.path})))),b=c.map((function(e){var t,a=I()(e.name),i=a.split(".");i[i.length-1]=i[i.length-1].toLowerCase(),a=i.join("."),h.length>0&&(t=Object(F.n)(a,h,s.props.active_path));var r=F.l(e,s.props.active_path,!0,t);return r.processing_status=y.a.OnHold,r.last_modified=new Date,r})),j=function(e){return e.size/1024>o.storage.max_file_size},m=b.filter((function(e){return j(e)})),O=b.filter((function(e){return!j(e)})),s.props.addFiles(O),m.length>0&&m.forEach((function(e){var t=s.props.addQuotaError({code:"SPACE_FILE_SIZE_QUOTA_EXCEEDED"},e);s.props.setProcessingStatus(e,y.a.Error,t)})),0!==O.length){e.next=31;break}return e.abrupt("return");case 31:s.handleFilesUpload(O);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleDragStart=function(){s.setState({dragging:!0})},s.handleDragStop=function(){s.setState({dragging:!1})},s.state={dragging:!1,files:[]},s}return Object(l.a)(a,[{key:"validFileExtensions",get:function(){var e;e=this.props.main_state.subscription_plan.name;return"pro"===this.props.main_state.subscription_plan.name||"premium"===this.props.main_state.subscription_plan.name?Object.keys(F.d).map((function(e){return".".concat(e)})):Object.keys(F.e).map((function(e){return".".concat(e)}))}},{key:"render",value:function(){var e=this;return Object(T.jsx)(x.a,Object(_.a)(Object(_.a)({onDropAccepted:this.handleDropAccepted,onDropRejected:this.handleDropRejected,onDragEnter:this.handleDragStart,onDragLeave:this.handleDragStop,accept:this.validFileExtensions},this.props.innerProps),{},{children:function(t){var a,s=t.getRootProps,i=t.getInputProps;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",Object(_.a)(Object(_.a)({},s({className:"dropzone"})),{},{children:[!(null!==(a=e.props.innerProps)&&void 0!==a&&a.noClick)&&Object(T.jsx)("input",Object(_.a)({},i())),!e.props.lite&&Object(T.jsx)(T.Fragment,{children:e.state.dragging&&Object(T.jsx)("div",{className:"-overlay",children:Object(T.jsx)("div",{className:"-inner-wrapper",children:Object(T.jsx)("div",{className:"-btn",children:"Drop files to upload"})})})}),e.props.children]}))})}}))}}]),a}(u.a.Component),R=Object(k.b)((function(e){return{main_state:e.main,files_uploaded:e.main.files_uploaded}}),(function(e){return Object(w.bindActionCreators)({addNotification:C.a,dismissNotification:C.c,updateNotification:C.e,addFiles:S.a,deleteFileUploaded:S.c,addModal:N.a,addQuotaError:L.a,updateMainBulkState:S.q,updateSpace:S.r,setProcessingStatus:S.o},e)}))(A),B=a(24),U=a(802),H=a(329),V=a(445),z=a.n(V);!function(e){e[e.MAX=20]="MAX",e[e.MIN=1]="MIN"}(s||(s={}));var q,Z="untitled-";!function(e){e[e.MAX=3]="MAX",e[e.ROOT=1]="ROOT"}(q||(q={}));var Q=function(e){return"undefined"===typeof e},X=function(e,t,a,i,r){var n=void 0;if(i?i.patternMismatch?n="Invalid character. A-Z, a-z, 0-9, _ and - allowed.":i.tooShort||e.trim().length<s.MIN?n="Please add at least ".concat(s.MIN," ").concat(s.MIN<=1?"character":"characters","."):i.tooLong?n="Please add maximum ".concat(s.MAX," characters."):i.valid||(n="Something failed. Please try again."):i||(e.trim().length<s.MIN?n="Please add at least ".concat(s.MIN," ").concat(s.MIN<=1?"character":"characters","."):e.length>s.MAX?n="Please add maximum ".concat(s.MAX," characters."):W(e)||(n="Invalid character. A-Z, a-z, 0-9, _ and - allowed.")),Q(n)){var o=t.toLowerCase().split("/"),l=a.length>0&&a.filter((function(e){return e.path.toLowerCase().includes(t.toLowerCase())&&e.path.split("/").length-1===o.length}))||[];l.length>0&&l.some((function(t){return t.name.toLowerCase()===e.toLowerCase()}))&&(Q(r)||(null===r||void 0===r?void 0:r.toLowerCase())!==e.toLowerCase())&&(n="Sorry, this folder name is already used.")}return n},Y=/^[a-zA-Z0-9_-]*$/,W=function(e){return Y.test(e)},G=function(e){var t=Object(_.a)({},e);return delete t.expanded,delete t.level,delete t.numberOfChildren,t},K=function(e){return{name:e&&e.name||"",base_name:e&&(e.base_name||e.name)||"",rel_path:e&&(e.rel_path||e.name)||"",path:e&&e.path||"",space_id:e&&(e.space_id||e.path&&e.path.split("/")[0])||"",dirs:[],size:0,extension:"",mime_type:"",is_text_based:!1,is_folder:!0,expanded:!1,level:e&&(e.level||e.path&&e.path.split("/").length-2)||0,numberOfChildren:0,parent:""}},J=function(e){return e.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}))},$=function(e){var t=e.split("/");return t.shift(),""!==t[t.length-1]&&t.push(""),t.join("/")},ee=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t,a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.l)({url:"/files",method:"POST",data:{action:"createFolder",path:t,_out_of_quota:"undefined"!==typeof a?a.usage_status._out_of_quota:null}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te=function(e,t){var a=e.split("/").length,s=t.filter((function(t){return t.path.split("/").length===a+1&&t.name.includes(Z)&&t.path.includes(e)})),i=1,r=!1,n="";do{n="".concat(Z).concat(i),s.some((function(e){return e.name===n}))||(r=!0),i++}while(!r&&i<=100);return n},ae=a(125);var se,ie=function(e){var t,a,s,i,o=Object(k.d)((function(e){return e.main})),l=o.spaces,c=Object(k.c)(),d=Object(p.useState)(!1),u=Object(B.a)(d,2),h=u[0],f=u[1],b=Object(p.useState)(!0),j=Object(B.a)(b,2),m=j[0],O=j[1],_=Object(p.useState)((null===(t=e.file)||void 0===t?void 0:t.name)||""),g=Object(B.a)(_,2),x=g[0],y=g[1],w=Object(p.useState)(void 0),N=Object(B.a)(w,2),M=N[0],I=N[1],P=Object(p.useState)(void 0),D=Object(B.a)(P,2),L=D[0],A=D[1],R=Object(p.useState)(!1),V=Object(B.a)(R,2),q=V[0],Z=V[1],Q=Object(p.useState)(),Y=Object(B.a)(Q,2),W=Y[0],G=Y[1],K=Object(p.useMemo)((function(){var t=l.filter((function(t){return t.id===e.spaceId}));return t&&0!==t.length?t[0].folders:[]}),[l,e.spaceId]),J=Object(p.useMemo)((function(){var t=l.filter((function(t){return t.id===e.spaceId}));return t&&0!==t.length?t[0].files:[]}),[l,e.spaceId]),$=Object(p.useMemo)((function(){return Object.keys(F.a).filter((function(e){return"htm"!==e}))}),[]),ee=Object(p.useMemo)((function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:z.a.info_text,children:[Object(T.jsx)("strong",{children:"More file formats?"})," Just rename an existing text file to one of the supported extensions."]}),Object(T.jsx)("div",{className:z.a.file_type_group,children:$.map((function(e,t){return Object(T.jsxs)("div",{className:z.a.extension_item,children:[".",e]},"extension-"+t)}))})]})}),[$]),te=Object(p.useState)(!0),se=Object(B.a)(te,2),ie=se[0],re=se[1];Object(p.useEffect)((function(){ie&&(re(!1),G(ee))}),[ee,ie]);var ne=Object(p.useState)(!1),oe=Object(B.a)(ne,2),le=oe[0],ce=oe[1];function de(){return Boolean(void 0===M)}function pe(t){t.preventDefault(),e.file&&x?de()?(f(!0),Z(!0)):O(!0):E.n.logError("No file to rename.")}return Object(p.useEffect)((function(){!e.file||e.file.mime_type!==F.c.mp4&&e.file.mime_type!==F.c.mp3?ce(!1):ce(!0)}),[e.file]),Object(p.useEffect)((function(){e.file?y(e.file.base_name):y("")}),[e.file]),Object(p.useEffect)((function(){function t(){return(t=Object(n.a)(Object(r.a)().mark((function t(){var a,s,i,n,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Z(!1),a=e.active_path+x+(e.file&&e.file.is_folder?"/":""),s=e.file,i=F.k({Key:a,LastModified:s&&s.last_modified?s.last_modified.toString():"",Size:s?s.size:0},e.spaceId),s&&s.is_folder&&(i.path=a),!s||s.path!==i.path){t.next=9;break}return A("Please set a ".concat(s.is_folder?"foldername":"filename"," different from the current ").concat(s.is_folder?"foldername":"filename")),f(!1),t.abrupt("return");case 9:return t.next=11,Object(E.l)({url:"/files",method:"POST",data:{action:"rename",src_path:s.path,dest_path:i.path,is_folder:!!s&&!!s.is_folder,_out_of_quota:o.usage_status._out_of_quota}});case 11:if(n=t.sent,E.n.logDebug("RenameFileModal -> file rename -> reqRes: ",n),"undefined"!==typeof n.data._update_main_state&&c(Object(S.q)(n.data._update_main_state)),"undefined"!==typeof n.data._update_space&&null!==n.data._update_space&&c(Object(S.r)(n.data._update_space)),"0"!==n.error.code){t.next=32;break}if(!n.data.failed_moving||!n.data.failed_moving.length){t.next=25;break}return null,l=Object(T.jsx)(T.Fragment,{children:n.data.failed_moving.map((function(e){return Object(T.jsxs)(T.Fragment,{children:[e.error.description,Object(T.jsx)("br",{})]})}))}),A(l),f(!1),O(!1),t.abrupt("return");case 25:i.last_modified=new Date,i.is_folder?c(Object(C.a)({id:Object(v.e)(),dismissed:!1,type:"success",header:"Folder renamed",body:Object(T.jsxs)(T.Fragment,{children:["Renamed ",F.o(s.base_name||"")," to ",Object(T.jsx)("strong",{children:i.base_name}),"."]})})):c(Object(C.a)({id:Object(v.e)(),dismissed:!1,type:"success",header:"File renamed",body:Object(T.jsxs)(T.Fragment,{children:["Renamed ",F.o(s.base_name)," to ",Object(T.jsx)("strong",{children:x}),"."]})})),f(!1),O(!1),e.close();case 30:t.next=47;break;case 32:t.t0=n.error.code,t.next="CURRENT_PATH_MISSING"===t.t0||"NEW_PATH_MISSING"===t.t0?35:"INVALID_FILE_EXTENSION"===t.t0?39:43;break;case 35:return A("File path is not valid."),f(!1),O(!1),t.abrupt("break",47);case 39:return A("File extension is not accepted."),f(!1),O(!1),t.abrupt("break",47);case 43:return A(n.error.description),f(!1),O(!1),t.abrupt("break",47);case 47:case"end":return t.stop()}}),t)})))).apply(this,arguments)}q&&function(){t.apply(this,arguments)}()}),[c,o.usage_status._out_of_quota,x,e,q]),Object(T.jsxs)(ae.a,{show:e.show,size:"lg",className:z.a.rename_file_modal+" w3s-rename-file-modal",title:null!==(a=e.file)&&void 0!==a&&a.is_folder?"Rename folder":"Rename file",disabled:h||m&&!de(),loading:h,okText:null!==(s=e.file)&&void 0!==s&&s.is_folder?"Rename folder":"Rename file",handleOk:pe,handleClose:function(){I(void 0),G(ee),A(void 0),O(!0),f(!1),e.close()},children:[Object(T.jsxs)("p",{children:["What do you want to call this ",e.file&&!e.file.is_folder?"file":"folder","?"]}),Object(T.jsxs)(U.a,{onSubmit:pe,children:[Object(T.jsx)(U.a.Control,{type:"text",value:x,onChange:function(t){var a,s,i=t.target.value,r=null!==(a=e.file)&&void 0!==a&&a.is_folder?X(i,e.active_path,K,void 0,e.file.name):F.s(i,J,e.active_path,o.subscription_plan.name,null===(s=e.file)||void 0===s?void 0:s.mime_type),n=F.p(i);"index.html"===i.toLowerCase()?n?G(Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("strong",{children:"Note!"})," ",e.file.path.split("/").length>2?"The filename need to be all lowercase and located in the root of the space for it to be used as a landing page for your space.":"The filename need to be all lowercase for it to be used as a landing page for your space."]})):e.file.path.split("/").length>2?G(Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("strong",{children:"Note!"})," The file needs to be located in the root of the space for it to be used as a landing page for your space."]})):re(!0):re(!0),y(i),I(r),A(void 0)},disabled:h,placeholder:"Enter a name for your ".concat(null!==(i=e.file)&&void 0!==i&&i.is_folder?"folder":"file"),isInvalid:m&&!de()}),m&&void 0!==M&&Object(T.jsx)(U.a.Text,{className:"rename-validation-error",children:M})]}),!!L&&Object(T.jsx)(H.a,{variant:"danger",children:L}),!L&&!!e.file&&!e.file.is_folder&&!le&&Object(T.jsxs)("div",{className:z.a.info_text_group,children:[Object(T.jsx)("div",{className:z.a.info_bar}),Object(T.jsx)("div",{className:z.a.info_text_subgroup,children:!!W&&W})]})]})},re=a(446),ne=a.n(re),oe=a(447),le=a.n(oe),ce=["title","titleId"];function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},de.apply(this,arguments)}function pe(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ue(e,t){var a=e.title,s=e.titleId,i=pe(e,ce);return p.createElement("svg",de({width:19,height:15,viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),a?p.createElement("title",{id:s},a):null,se||(se=p.createElement("path",{d:"M18.6875 2.25C18.6875 2.58584 18.5593 2.92184 18.303 3.17777L7.80298 13.6778C7.54766 13.9354 7.21133 14.0625 6.875 14.0625C6.53867 14.0625 6.20316 13.9343 5.94723 13.678L0.697227 8.42798C0.440879 8.17266 0.3125 7.83633 0.3125 7.5C0.3125 6.75023 0.925684 6.1875 1.625 6.1875C1.96084 6.1875 2.29684 6.31567 2.55277 6.57202L6.875 10.8961L16.448 1.32305C16.7023 1.06588 17.0387 0.9375 17.375 0.9375C18.0764 0.9375 18.6875 1.49941 18.6875 2.25Z",fill:"white"})))}var he=p.forwardRef(ue);a.p;var fe=function(e){var t=Object(p.useState)(!1),a=Object(B.a)(t,2),s=a[0],i=a[1];return Object(p.useEffect)((function(){i(e.selected)}),[e.selected]),Object(T.jsx)("div",{id:e.id,className:le.a.outer_border+(s?" "+le.a.selected:""),children:Object(T.jsxs)("div",{className:le.a.file_type_item+(s?" "+le.a.selected:"")+(e.disabled?" "+le.a.disabled:"")+(e.className?" "+e.className:""),onClick:function(){return!e.disabled&&e.onClick(e.returnValue)},children:[Object(T.jsx)("div",{className:le.a.selected_group,children:Object(T.jsx)("div",{className:le.a.selected_icon,children:Object(T.jsx)(he,{})})}),Object(T.jsx)("div",{className:le.a.header,children:Object(T.jsx)("div",{children:e.header})}),Object(T.jsx)("div",{className:le.a.description,children:Object(T.jsx)("div",{children:e.description})})]})})},be=a(354),je="new-file";var me=function(e){var t=Object(k.d)((function(e){return e.main})),a=Object(k.c)(),s=Object(p.useState)(be.a.Default),i=Object(B.a)(s,2),o=i[0],l=i[1],c=Object(p.useState)(!1),d=Object(B.a)(c,2),u=d[0],h=d[1],f=Object(p.useState)(!0),b=Object(B.a)(f,2),j=b[0],m=b[1],O=Object(p.useState)(),_=Object(B.a)(O,2),g=_[0],x=_[1],w=Object(p.useState)(void 0),E=Object(B.a)(w,2),M=E[0],I=E[1],D=Object(p.useState)(je),A=Object(B.a)(D,2),R=A[0],V=A[1],z=Object(p.useState)("html"),q=Object(B.a)(z,2),Z=q[0],Q=q[1],X=Object(p.useState)(!1),Y=Object(B.a)(X,2),W=Y[0],G=Y[1],K=Object(p.useState)(),J=Object(B.a)(K,2),$=J[0],ee=J[1],te=Object(p.useMemo)((function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("strong",{children:"More file formats?"})," Just rename an existing text file to one of the supported extensions.",Object(T.jsx)("a",{className:ne.a.more_info_link,href:"https://support.w3schools.com/hc/en-gb/articles/4410407391761",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more"})]})}),[]),se=Object(p.useState)(!0),ie=Object(B.a)(se,2),re=ie[0],oe=ie[1];Object(p.useEffect)((function(){re&&(oe(!1),ee(te))}),[te,re]);var le=Object(p.useMemo)((function(){return[{extension:"html",header:".html",description:"Structure content"},{extension:"css",header:".css",description:"Style content"},{extension:"js",header:".js",description:"Script content"}]}),[]);function ce(){return Boolean(void 0===g)}function de(e){Q(e)}function pe(e){e.preventDefault(),u||(h(!0),G(!0))}var ue=Object(p.useCallback)((function(){h(!1),m(!0),I(void 0),V(je),x(void 0),e.close()}),[e]),he=Object(p.useCallback)((function(t){var a=t+("/"===t.charAt(t.length-1)?"":"/");if(void 0===e.space.files)return"".concat(a).concat(R,".").concat(Z);var s=(R+"."+Z).toLowerCase();if(!e.space.files.some((function(e){return e.base_name_lowercased===s})))return"".concat(a).concat(s);for(var i=R,r=1;r<100;r++)if(i="".concat(R,"-").concat(r,".").concat(Z),!e.space.files.some((function(e){return e.path===a+i})))return"".concat(a).concat(i);return"".concat(a).concat(i)}),[R,e.space.files,Z]),me=Object(p.useCallback)(Object(n.a)(Object(r.a)().mark((function s(){var i,n,o,l,c,d,p,u,f,b,j,m;return Object(r.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return(o=F.h(he(e.active_path))).processing=!0,a(Object(S.a)([o])),s.next=5,F.g(o,t);case 5:if("undefined"!==typeof(l=s.sent).data._update_main_state&&a(Object(S.q)(l.data._update_main_state)),"undefined"!==typeof l.data._update_space&&null!==l.data._update_space&&a(Object(S.r)(l.data._update_space)),"0"===(null===(i=l.error)||void 0===i?void 0:i.code)){s.next=13;break}return"quota"===(null===(c=l.error)||void 0===c?void 0:c.context)?d=a(Object(L.a)(l.error,o)):(a(Object(C.a)({id:Object(v.e)(),dismissed:!1,type:"error",header:"Upload error",body:null===(p=l.error)||void 0===p?void 0:p.description})),d=null===(u=l.error)||void 0===u?void 0:u.description),a(Object(S.o)(o,y.a.Error,d)),h(!1),s.abrupt("return");case 13:return s.next=15,F.r(l.data.url,o);case 15:return s.next=17,F.q(o,t);case 17:if("undefined"!==typeof(f=s.sent).data._update_main_state&&a(Object(S.q)(f.data._update_main_state)),"undefined"!==typeof f.data._update_space&&null!==f.data._update_space&&(f.data._update_space.files=f.data._update_space.files.map((function(e){return e.path===f.data.file.Key&&(e.last_modified=new Date(f.data.file.LastModified),e.processing_status=y.a.Uploaded),e})),a(Object(S.r)(f.data._update_space))),"0"===(null===(n=f.error)||void 0===n?void 0:n.code)){s.next=25;break}return"quota"===(null===(b=f.error)||void 0===b?void 0:b.context)?a(Object(L.a)(f.error,o)):a(Object(C.a)({id:Object(v.e)(),dismissed:!1,type:"error",header:"Upload error",body:null===(m=f.error)||void 0===m?void 0:m.description})),a(Object(S.o)(o,y.a.Error,null===(j=f.error)||void 0===j?void 0:j.description)),h(!1),s.abrupt("return");case 25:o.processing=!1,ue();case 27:case"end":return s.stop()}}),s)}))),[a,he,ue,t,e.active_path]);return Object(p.useEffect)((function(){if(W){G(!1);var s=P.c(t,e.space,"file");if("0"!==s.code)return"quota"===s.context?a(Object(L.a)(s)):a(Object(N.a)({id:Object(v.e)(),dismissed:!1,type:"error",header:Object(T.jsx)(T.Fragment,{children:"Space temporarily closed"}),body:Object(T.jsx)(T.Fragment,{children:s.description}),dismissButtonText:"Got it"})),void h(!1);me()}}),[me,a,u,t,e.space,W]),Object(T.jsxs)(ae.a,{show:e.show,className:ne.a.new_file_modal,title:"Create a new file",size:"lg",disabled:u||j&&!ce(),loading:u,okText:"Create file",handleOk:pe,handleClose:ue,children:[Object(T.jsx)("div",{className:ne.a.file_type_group,children:le.map((function(e){return Object(T.jsx)(fe,{selected:Z===e.extension,returnValue:e.extension,header:e.header,description:e.description,onClick:de,className:ne.a.file_type_item,disabled:u||j&&!ce()},"FileType_"+e.extension)}))}),Object(T.jsx)("p",{children:"What do you want to call this file?"}),Object(T.jsxs)(U.a,{onSubmit:pe,children:[Object(T.jsxs)("div",{className:ne.a.form_control_group,children:[Object(T.jsx)(U.a.Control,{type:"text",value:R,onChange:function(t){var a,s=t.target.value,i=Object(F.p)(s);"html"===Z&&"index"===s.toLowerCase()?i?(ee(Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("strong",{children:"Note!"})," ",e.active_path.split("/").length>2?"The filename need to be all lowercase and located in the root of the space for it to be used as a landing page for your space.":"The filename need to be all lowercase for it to be used as a landing page for your space."]})),l(be.a.Destructive)):e.active_path.split("/").length>2?(ee(Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("strong",{children:"Note!"})," The file needs to be located in the root of the space for it to be used as a landing page for your space."]})),l(be.a.Destructive)):(oe(!0),l(be.a.Default)):(oe(!0),l(be.a.Default)),a=/^\s+$/.test(R)||0===s.length?"Can not have an empty file name.":F.s(s+"."+Z,e.space.files,e.active_path),I(void 0),V(s),x(a)},disabled:u,placeholder:"Enter a name for your file",isInvalid:j&&!ce(),minLength:F.b.MIN,maxLength:F.b.MAX}),Object(T.jsx)(U.a.Text,{className:ne.a.extension_text,children:".".concat(Z)})]}),j&&!!g&&Object(T.jsx)(U.a.Text,{className:"rename-validation-error",children:g})]}),M&&Object(T.jsx)(H.a,{variant:"danger",children:M}),!M&&Object(T.jsx)(be.b,{variant:o,children:!!$&&$})]})},Oe=a(448),ve=a.n(Oe);var _e=function(e){var t=Object(k.d)((function(e){return e.main})),a=Object(k.c)(),i=Object(p.useState)(!1),o=Object(B.a)(i,2),l=o[0],c=o[1],d=Object(p.useState)(!0),u=Object(B.a)(d,2),h=u[0],f=u[1],b=Object(p.useState)(),j=Object(B.a)(b,2),m=j[0],O=j[1],_=Object(p.useState)(),g=Object(B.a)(_,2),x=g[0],w=g[1],N=Object(p.useState)(e.defaultName),F=Object(B.a)(N,2),E=F[0],M=F[1],I=Object(p.useState)(!1),P=Object(B.a)(I,2),D=P[0],A=P[1];function R(e){if(e.preventDefault(),!l){if(!h)return;c(!0),A(!0)}}var V=Object(p.useCallback)((function(){M(e.defaultName),w(void 0),O(void 0),f(!0),c(!1),e.close()}),[e]),z=Object(p.useCallback)(Object(n.a)(Object(r.a)().mark((function s(){var i,n,o,l,c;return Object(r.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=e.path+E+"/",s.next=3,ee(i,t);case 3:n=s.sent,"undefined"!==typeof(o=n.data)._update_main_state&&a(Object(S.q)(o._update_main_state)),"undefined"!==typeof o._update_space&&null!==o._update_space&&a(Object(S.r)(o._update_space)),"0"!==n.error.code?("quota"===(null===(l=n.error)||void 0===l?void 0:l.context)?(c=G(K()),a(Object(L.a)(n.error,c))):a(Object(C.a)({id:Object(v.e)(),dismissed:!1,type:"error",header:"Create folder error",body:"".concat(n.error.description)})),V()):(a(Object(C.a)({id:Object(v.e)(),dismissed:!1,type:"success",header:"Created folder",body:Object(T.jsxs)(T.Fragment,{children:["Your folder ",Object(T.jsx)("strong",{children:E})," was successfully created."]})})),a(Object(S.o)(i,y.a.NewFolder)),V());case 8:case"end":return s.stop()}}),s)}))),[a,V,E,t,e.path]);return Object(p.useEffect)((function(){D&&(A(!1),z())}),[z,D]),Object(T.jsxs)(ae.a,{show:e.show,size:"lg",className:ve.a.new_folder_modal,backdrop:"static",title:"Create a new folder",handleClose:V,handleOk:R,loading:l,disabled:l||!h||!!m,okText:"Create folder",children:[Object(T.jsx)("p",{children:"What do you want to call this folder?"}),m&&Object(T.jsx)(H.a,{variant:"danger",children:m}),Object(T.jsxs)(U.a,{onSubmit:R,children:[Object(T.jsx)(U.a.Control,{type:"text",defaultValue:e.defaultName,onChange:function(t){var a=t.target.validity.valid,s=X(t.target.value,e.path,e.existingFolders,t.target.validity);(a=!s)&&(t.target.validity.tooShort||0===t.target.value.length)&&(a=!1),a!==h&&(f(a),w(s)),!a||"Enter"!==t.key&&13!==t.keyCode?M(t.target.value):R(t)},isInvalid:!h,disabled:l,pattern:Y.source,placeholder:"Enter a name for your folder",minLength:s.MIN,maxLength:s.MAX}),!h&&void 0!==x&&Object(T.jsx)(U.a.Text,{className:"rename-validation-error",children:x})]})]})},ge=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).displayFileKey=function(e){return e.split("/").splice(1).join("/")},s.handleClose=function(){s.setState({loading:!1,errorMessage:void 0},(function(){s.props.close()}))},s.handleSubmit=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.props.file&&s.props.file){e.next=4;break}return E.n.logError("No file to delete."),e.abrupt("return");case 4:return s.setState({loading:!0}),a=s.props.file,e.next=8,Object(E.l)({url:"/files",method:"POST",data:{action:"delete",path:a.path,is_folder:!!a.is_folder,_out_of_quota:s.props.main_state.usage_status._out_of_quota}});case 8:if(i=e.sent,E.n.logDebug("DeleteFileModal -> file deletion -> reqRes: ",i),"undefined"!==typeof i.data._update_main_state&&s.props.updateMainBulkState(i.data._update_main_state),"undefined"!==typeof i.data._update_space&&null!==i.data._update_space&&s.props.updateSpace(i.data._update_space),"0"!==i.error.code){e.next=16;break}s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"success",header:"".concat(a.is_folder?"Folder":"File"," deleted"),body:Object(T.jsxs)("span",{children:["Your ",a.is_folder?"folder":"file"," ",Object(T.jsx)("strong",{children:Object(F.o)(a.base_name)})," was successfully deleted."]})}),e.next=23;break;case 16:e.t0=i.error.code,e.next="PATH_NOT_FOUND"===e.t0?19:21;break;case 19:return s.setState({errorMessage:"No path provided for ".concat(a.is_folder?"folder":"file","."),loading:!1}),e.abrupt("break",23);case 21:return s.setState({errorMessage:i.error.description,loading:!1}),e.abrupt("break",23);case 23:s.handleClose();case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={loading:!1},s}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a;return Object(T.jsxs)(ae.a,{show:this.props.show,size:"lg",className:"delete-file-modal",backdrop:"static",title:null!==(e=this.props.file)&&void 0!==e&&e.is_folder?"Delete folder?":"Delete file?",loading:this.state.loading,disabled:this.state.loading,okText:null!==(t=this.props.file)&&void 0!==t&&t.is_folder?"Yes, delete folder":"Yes, delete file",okButtonVariant:"destructive",handleClose:this.handleClose,handleOk:this.handleSubmit,children:[null!==(a=this.props.file)&&void 0!==a&&a.is_folder?Object(T.jsxs)("span",{children:["Please confirm that you want to permanently delete ",Object(T.jsx)("strong",{children:this.props.file?this.props.file.name:""})," and all the files stored in this folder?",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),"This cannot be undone."]}):Object(T.jsxs)("span",{children:["Are you sure that you want to delete the file ",Object(T.jsx)("strong",{children:this.props.file?Object(F.o)(this.props.file.rel_path,!0):""}),"?"]}),this.state.errorMessage&&Object(T.jsx)(H.a,{variant:"danger",children:this.state.errorMessage})]})}}]),a}(u.a.Component),xe=Object(k.b)((function(e){return{main_state:e.main}}),(function(e){return Object(w.bindActionCreators)({addNotification:C.a,updateMainBulkState:S.q,updateSpace:S.r},e)}))(ge),ye=(a(449),a(807));a(450);var we,Ce=function(e){var t=e.path,a=e.folderIsSelected,s=e.spaceId,i=e.disabled,r=void 0!==i&&i,n=e.grayBackground,o=void 0!==n&&n,l=e.handleClickItem,c=u.a.useState(t),d=Object(B.a)(c,2),p=d[0],h=d[1];return u.a.useEffect((function(){var e=t;""===e[e.length-1]&&e.pop(),h(e)}),[t]),Object(T.jsx)(ye.a,{className:"folder-breadcrumb"+(o?" gray-background":""),children:a?t.map((function(e,a){return r||a===p.length-1?Object(T.jsx)(ye.a.Item,{active:!0,children:e},e+a):Object(T.jsx)(ye.a.Item,{className:"w3s-black-color",onClick:function(){return function(e){for(var a="",s=0;s<=e;)a+=t[s]+"/",s+=1;l(a)}(a)},children:e},e+a)})):Object(T.jsx)(ye.a.Item,{active:!0,children:s},s)})},Ne=["title","titleId"];function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Se.apply(this,arguments)}function ke(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Fe(e,t){var a=e.title,s=e.titleId,i=ke(e,Ne);return p.createElement("svg",Se({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),a?p.createElement("title",{id:s},a):null,we||(we=p.createElement("path",{d:"M19.4509 2.97969L17.0204 0.549219C16.654 0.183203 16.1743 0 15.6946 0C15.2146 0 14.7349 0.183203 14.3688 0.549219L0.549316 14.3687C-0.183105 15.1012 -0.183105 16.2883 0.549316 17.0203L2.97979 19.4508C3.3458 19.8168 3.82588 20 4.30557 20C4.78525 20 5.26533 19.8168 5.63135 19.4508L19.4505 5.63125C20.1833 4.89922 20.1833 3.71211 19.4509 2.97969ZM4.30596 18.125L1.8751 15.6945L10.6212 6.94727L13.0524 9.37852L4.30596 18.125ZM14.3782 8.05234L11.947 5.62109L15.6927 1.875H15.6946L18.1251 4.30547L14.3782 8.05234ZM16.8751 11.25L15.8337 13.3332L13.7501 14.375L15.8337 15.4168L16.8751 17.5L17.9165 15.4168L20.0001 14.375L17.9165 13.3332L16.8751 11.25ZM8.7501 3.75L9.3751 2.5L10.6251 1.875L9.3751 1.25L8.7501 0L8.1251 1.25L6.8751 1.875L8.1251 2.5L8.7501 3.75ZM3.1251 6.25L4.1665 4.1668L6.2501 3.125L4.1665 2.0832L3.1251 0L2.08369 2.0832L9.76399e-05 3.125L2.08369 4.1668L3.1251 6.25Z",fill:"#282A35"})))}var Ee=p.forwardRef(Fe),Me=(a.p,a(823)),Ie=a(371),Pe=(a(361),a(451),a(362)),De=a(373),Le=a(374),Te=a(360);var Ae=function(e){var t=u.a.useRef(e.item.name),a=u.a.useRef(""),i=u.a.useState(!0),r=Object(B.a)(i,2),n=r[0],o=r[1],l=u.a.useState(""),c=Object(B.a)(l,2),d=c[0],p=c[1];function h(a){var s=e.item;if(n){s.name=t.current,s.base_name=t.current,s.base_name_lowercased=t.current.toLowerCase();var i=s.path.split("/");i[i.length-2]=s.name,s.path=i.join("/"),s.rel_path=$(s.path),e.handleClickSaveNewFolder(s)}}return u.a.useEffect((function(){var t=e.active_path.split("/");if(t.length<=2)a.current=e.active_path;else{var s=t.splice(0,t.length-2);a.current=s.join("/")+"/"}}),[e.active_path]),Object(T.jsx)("tr",{className:"item-tree-table-row"+(e.disabled||e.loading?" disabled":""),children:Object(T.jsx)("td",{className:(e.selected?"selected":"")+(""!==d?" display-error":""),onClick:function(){!e.disabled&&e.handleClickRow(e.item)},children:Object(T.jsxs)("div",{className:"row-div",children:[e.item.level>0&&Object(T.jsx)("div",{className:"divider-move-row",style:function(){return{width:(t=e.item.level,24*t).toString()+"px"};var t}()}),e.item.numberOfChildren>0&&Object(T.jsx)(b.a,{variant:"std",className:"ml-n4 expand-folder-btn",size:"sm",disabled:e.disabled||e.loading,onClick:function(t){return e.handleClickExpand(t,e.item)},children:e.item.expanded?Object(T.jsx)(De.a,{}):Object(T.jsx)(Le.a,{})}),e.item.level>0?Object(T.jsx)(Pe.a,{className:"folder-icon"}):Object(T.jsx)(Te.a,{spaceState:"OPEN",size:18}),e.editing?Object(T.jsxs)(Me.a,{children:[Object(T.jsx)(Ie.a,{id:"form-input-new-folder-name",placeholder:"Add a folder name",defaultValue:e.item.name,type:"text","aria-label":"Add a folder name",minLength:s.MIN,maxLength:s.MAX,required:!0,pattern:Y.source,onKeyUp:function(s){var i=X(s.target.value,a.current,e.existingFolders,s.target.validity),r="undefined"===typeof i;o(r),p(i||""),!r||"Enter"!==s.key&&13!==s.keyCode?t.current=s.target.value:h()}}),Object(T.jsx)(Ie.a.Feedback,{type:"invalid",tooltip:!0,className:""!==d?"display-error-feedback":"",children:d}),Object(T.jsx)(b.a,{variant:"primary",className:"btn-save-new-folder",disabled:!n||e.loading,onClick:h,children:Object(T.jsx)(he,{})})]}):e.item.name]})})},e.item.path)};var Re,Be=function(e){return Object(T.jsxs)(j.a,{hover:!0,className:"".concat(e.className?e.className+" ":"","w3s-tabletree"),size:"sm",children:[!!e.headerChild&&Object(T.jsx)("thead",{children:e.headerChild}),Object(T.jsx)("tbody",{children:e.loading||0!==e.tableItems.length?e.tableItems.map((function(t){return Object(T.jsx)(Ae,{item:t,disabled:!!e.disabled,editing:!!e.editItemPath&&e.editItemPath===t.path,selected:!!e.selectedItemPath&&e.selectedItemPath===t.path,loading:!!e.loading,existingFolders:e.tableItems,active_path:e.selectedItemPath,handleClickExpand:e.onClickExpand,handleClickRow:e.onClickRow,handleClickSaveNewFolder:e.onClickSaveNewFolder?e.onClickSaveNewFolder:function(){}},t.path)})):Object(T.jsx)("tr",{children:Object(T.jsx)("td",{children:"Looks like you don't have any items!"})},"123456")}),!!e.footerChild&&Object(T.jsx)("tfoot",{children:e.footerChild})]})};!function(e){e[e.NONE=0]="NONE",e[e.NO_FOLDERS=1]="NO_FOLDERS",e[e.SAME_AS_SELECTED=2]="SAME_AS_SELECTED"}(Re||(Re={}));var Ue,He=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).allFolders=void 0,s.addNewFolder=Object(n.a)(Object(r.a)().mark((function e(){var t,a,i,n,o,l,c,d;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=s.state.selectedFolder||s.state.folders[0]).level<q.MAX)){e.next=19;break}if(a=te(t.path,s.getChildFolders(t.path,t.level)),""===(i=t.path.split("/"))[i.length-1]&&i.pop(),n=i.join("/")+"/"+a+"/",o=K({name:a,path:n,rel_path:$(n),space_id:s.props.spaceId,level:t.level+1}),s.allFolders.push(o),t.numberOfChildren++,t.expanded){e.next=14;break}return e.next=12,s.clickExpanded(void 0,t);case 12:e.next=18;break;case 14:l=s.state.folders,c=function(e){return t.path===e.path},d=l.findIndex(c),l.splice(d+1,0,o);case 18:s.setState({folders:s.state.folders},(function(){s.setState({editing:!0,editFolder:o,tipText:s.setTipText(Re.NONE),displayTip:Re.NONE},(function(){s.selectRow(o)}))}));case 19:case"end":return e.stop()}}),e)}))),s.clickExpanded=function(e,t){return e&&e.stopPropagation(),new Promise((function(e,a){if(t.numberOfChildren>0){t.expanded=!t.expanded;var r=s.state.folders,n=r.findIndex((function(e){return t.path===e.path})),o=!1;t.expanded?r.splice.apply(r,[n+1,0].concat(Object(i.a)(J(s.getChildFolders(t.path,t.level))))):(o=s.setAllToCollapsed(t),r.splice(n+1,s.numberOfChildrenDisplayed(t,n+1))),s.setState({folders:r},(function(){o&&s.selectRow(t),e(!0)}))}else e(!1)}))},s.setAllToCollapsed=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.expanded=!1;var a=t;return s.getChildFolders(e.path,e.level).forEach((function(e){a=e.numberOfChildren>0&&e.expanded&&s.setAllToCollapsed(e,t),e.expanded=!1,t||"undefined"===typeof s.state.selectedFolder||s.state.selectedFolder.path!==e.path||(t=!0)})),t||a||!1},s.collapseAllFolders=function(){s.state.folders.filter((function(e){return 1===e.level})).forEach((function(e){e.expanded&&s.clickExpanded(void 0,e)}))},s.numberOfChildrenDisplayed=function(e,t){for(var a=0,i=t,r=s.state.folders.length;i<r&&s.state.folders[i].level>e.level;)a+=1,i+=1;return a},s.selectRow=function(e){return new Promise((function(t,a){var i;if((null===(i=s.state.selectedFolder)||void 0===i?void 0:i.path)===e.path)t(!0);else{var r=s.state.displayTip;s.state.displayTip===Re.NONE?e.path===s.props.active_path&&(r=Re.SAME_AS_SELECTED):s.state.displayTip===Re.SAME_AS_SELECTED&&(r=Re.NONE),s.setState({selectedFolder:e,tipText:s.setTipText(r),displayTip:r},(function(){t(!0)}))}}))},s.saveNewFolder=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.setState({loading:!0},Object(n.a)(Object(r.a)().mark((function e(){var a,i,n,o,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){var t;return(null===(t=s.state.selectedFolder)||void 0===t?void 0:t.path)===e.path},i=s.allFolders.findIndex(a),n=t.path,e.next=5,ee(n,s.props.main_state);case 5:"undefined"!==typeof(o=e.sent).data._update_main_state&&s.props.updateMainBulkState(o.data._update_main_state),"undefined"!==typeof o.data._update_space&&null!==o.data._update_space&&s.props.updateSpace(o.data._update_space),"0"!==o.error.code?"quota"===(null===(l=o.error)||void 0===l?void 0:l.context)?(s.props.addQuotaError(o.error,t),s.handleClose()):(s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"Create folder error",body:"".concat(o.error.description)}),s.setState({loading:!1,editing:!1,editFolder:void 0,errorMessage:o.error.description})):(s.allFolders[i]=t,s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"success",header:"Created folder",body:Object(T.jsxs)(T.Fragment,{children:["Your folder ",Object(T.jsx)("strong",{children:t.name})," was successfully created."]})}),s.props.setProcessingStatus(n,y.a.NewFolder),s.setState({loading:!1,editing:!1,editFolder:void 0}));case 9:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleOpen=function(){return s.setState({loading:!0}),new Promise((function(e,t){var a;s.allFolders=((a=s.props.space_folders.map((function(e){return K(e)}))).forEach((function(e){var t=e.path.split("/");""===t[t.length-1]?e.level=e.path.split("/").length-2:e.level=e.path.split("/").length-1})),a),s.allFolders.forEach((function(e){e.numberOfChildren=s.getChildFolders(e.path,e.level).length}));var i=K();i.space_id=s.props.spaceId,i.path=s.props.spaceId+"/",i.rel_path="/",i.level=0,i.numberOfChildren=s.getChildFolders(i.path,i.level).length,i.name=s.props.spaceId,i.base_name=s.props.spaceId,s.allFolders.push(i),e(!0)})).then((function(){return J(s.getChildFolders("",0))})).then((function(e){s.setState({folders:e},(function(){var e="",t=s.props.active_path.split("/");return t.forEach(function(){var a=Object(n.a)(Object(r.a)().mark((function a(i,n){var o,l;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(n<t.length-2)){a.next=8;break}if(e+=i+"/",!(o=s.allFolders.find((function(t){return t.path===e})))){a.next=6;break}return a.next=6,s.clickExpanded(void 0,o);case 6:a.next=14;break;case 8:if(n!==t.length-2){a.next=14;break}if(e+=i+"/",!(l=s.allFolders.find((function(t){return t.path===e})))){a.next=14;break}return a.next=14,s.selectRow(l);case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()),Promise.resolve()}))})).then(Object(n.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Re.NONE,0!==s.space.folders.length){e.next=5;break}t=Re.NO_FOLDERS,e.next=10;break;case 5:if(s.props.active_path!==s.props.spaceId+"/"){e.next=10;break}if(!(a=s.allFolders.find((function(e){return e.path===s.props.spaceId+"/"})))){e.next=10;break}return e.next=10,s.clickExpanded(void 0,a);case 10:t===Re.NONE&&(t=Re.SAME_AS_SELECTED),s.setState({loading:!1,tipText:s.setTipText(t),displayTip:t},(function(){return Promise.resolve()}));case 12:case"end":return e.stop()}}),e)}))))},s.setTipText=function(e){var t="";switch(e){case Re.NO_FOLDERS:t=Object(T.jsxs)(T.Fragment,{children:["No folders yet? Click on ",Object(T.jsx)("strong",{children:"New folder"})," to create one."]});break;case Re.SAME_AS_SELECTED:t="Selected folder is where you are coming from. Try another folder.";break;default:t=""}return t},s.getChildFolders=function(e,t){if(t===q.MAX)return[];if(""===e)return s.allFolders.filter((function(e){return e.path===s.props.spaceId+"/"}));var a=e.split("/");return s.allFolders.filter((function(e){if(e.level!==t+1)return!1;var s=e.path.split("/");if(""===a[a.length-1]&&a.pop(),""===s[s.length-1]&&s.pop(),s.length!==a.length+1)return!1;for(var i=0,r=!0;i<a.length&&r;){a[i]!==s[i]&&(r=!1),i++}return r}))},s.handleClose=function(){s.setState({editFolder:void 0,editing:!1,loading:!1,selectedFolder:void 0,folders:[],errorMessage:void 0},(function(){s.allFolders=[],s.props.close()}))},s.handleSubmit=function(e){if(e.preventDefault(),s.props.files&&0!==s.props.files.length){var t=s.props.files&&s.props.files[0];t&&s.setState({loading:!0},Object(n.a)(Object(r.a)().mark((function e(){var a,i,n,o,l,c,d,p;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===(a=s.state.selectedFolder)||void 0===a?void 0:a.path)||s.props.spaceId+"/",n={action:"move",src_path:t.path,dest_path:"",is_folder:!!t.is_folder},t.is_folder?n.dest_path=i:(o=t.path.split("/"),n.dest_path=i+o[o.length-1]),e.next=5,Object(E.l)({url:"/files",method:"POST",data:n});case 5:if(l=e.sent,E.n.logDebug("MoveFileModal -> handleSubmit -> reqRes: ",l),"undefined"!==typeof l.data._update_main_state&&s.props.updateMainBulkState(l.data._update_main_state),"undefined"!==typeof l.data._update_space&&null!==l.data._update_space&&s.props.updateSpace(l.data._update_space),"0"!==l.error.code){e.next=13;break}s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"success",header:"Move",body:Object(T.jsxs)(T.Fragment,{children:["Moved ",s.props.files&&s.props.files.length?s.props.files.length:0," ",s.props.files&&(null===(c=s.props.files)||void 0===c?void 0:c.length)<=1?"file":"files"," to the folder ",Object(T.jsx)("strong",{children:null===(d=s.state.selectedFolder)||void 0===d?void 0:d.base_name}),"."]})}),e.next=23;break;case 13:p="",e.t0=l.error.code,e.next="PATH_NOT_FOUND"===e.t0?17:"BRAFLWTNAE"===e.t0?19:21;break;case 17:return p="No path provided for ".concat(t.is_folder?"folder":"file","."),e.abrupt("break",22);case 19:return p=Object(T.jsxs)(T.Fragment,{children:["The file ",Object(T.jsx)("strong",{children:t.base_name})," already exist in this location.",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),"You need to rename one of them before you can move it to this location."]}),e.abrupt("break",22);case 21:p=l.error.description||"Unknown error.";case 22:s.props.addNotification({id:Object(v.e)(),dismissed:!1,type:"error",header:"Move error",body:p});case 23:s.handleClose();case 24:case"end":return e.stop()}}),e)}))))}else E.n.logError("No item to move.")},s.onClickBreadcrumbItem=function(e){var t=s.state.folders.find((function(t){return t.path===e}))||s.state.selectedFolder||K({path:s.props.spaceId,space_id:s.props.spaceId});s.selectRow(t).then((function(){"undefined"===typeof s.state.selectedFolder?s.collapseAllFolders():s.clickExpanded(void 0,t)}))},s.state={loading:!1,editing:!1,editFolder:void 0,folders:[],selectedFolder:void 0,displayTip:Re.NONE,tipText:""},s.allFolders=[],s}return Object(l.a)(a,[{key:"space",get:function(){var e=this;return this.props.spaces.filter((function(t){return t.id===e.props.spaceId}))[0]}},{key:"headerObject",get:function(){return Object(T.jsx)("tr",{children:Object(T.jsx)("th",{className:"breadcrumb-header",children:Object(T.jsx)(Ce,{folderIsSelected:!("undefined"===typeof this.state.selectedFolder),spaceId:this.props.spaceId,disabled:this.state.editing||this.state.loading,grayBackground:!0,path:"undefined"===typeof this.state.selectedFolder?[]:this.state.selectedFolder.path.split("/"),handleClickItem:this.onClickBreadcrumbItem})})})}},{key:"footerObject",get:function(){return Object(T.jsx)("tr",{children:Object(T.jsxs)("td",{children:[Object(T.jsx)(Ee,{className:"mr-2 mb-2"})," ",Object(T.jsx)("strong",{children:" Tip: "}),this.state.tipText]})})}},{key:"newFolderObject",get:function(){return Object(T.jsx)("div",{className:" new-folder-btn",children:Object(T.jsx)(E.a,{variant:"noframe",text:"+ New folder",disabled:this.state.editing||this.state.loading||!("undefined"===typeof this.state.selectedFolder)&&this.state.selectedFolder.level===q.MAX,onClick:this.addNewFolder})})}},{key:"render",value:function(){var e,t;return Object(T.jsxs)(ae.a,{show:this.props.show,size:"lg",className:"move-file-modal",scrollable:!0,backdrop:"static",disabled:this.state.editing||this.state.loading||this.props.active_path===(this.state.selectedFolder?this.state.selectedFolder.path:this.props.spaceId+"/"),loading:this.state.loading,title:"Move ".concat(this.props.files&&this.props.files.length||0," item").concat(this.props.files&&this.props.files.length>1?"s":""," to folder"),okText:this.props.files&&1===this.props.files.length?"Move item":"Move items",forceFullScreenOnMedium:!0,handleClose:this.handleClose,handleShow:this.handleOpen,handleOk:this.handleSubmit,preExtraButtons:this.newFolderObject,children:[!!this.state.errorMessage&&Object(T.jsx)(H.a,{variant:"danger",children:this.state.errorMessage}),!this.state.errorMessage&&Object(T.jsx)("div",{className:"rounded-table-wrapper ",children:Object(T.jsx)(Be,{className:"rounded-table",headerChild:this.headerObject,loading:this.state.loading,editItemPath:null===(e=this.state.editFolder)||void 0===e?void 0:e.path,selectedItemPath:(null===(t=this.state.selectedFolder)||void 0===t?void 0:t.path)||this.props.spaceId+"/",disabled:this.state.editing,tableItems:this.state.folders,onClickExpand:this.clickExpanded,onClickRow:this.selectRow,onClickSaveNewFolder:this.saveNewFolder})}),this.state.displayTip!==Re.NONE&&Object(T.jsxs)("div",{className:"flex-row mt-3 pl-3",children:[Object(T.jsx)(Ee,{className:"mr-2 mb-2"})," ",Object(T.jsx)("strong",{children:" Tip: "}),this.state.tipText]})]})}}]),a}(u.a.Component),Ve=Object(k.b)((function(e){return{spaces:e.main.spaces,main_state:e.main}}),(function(e){return Object(w.bindActionCreators)({addNotification:C.a,updateMainBulkState:S.q,updateSpace:S.r,addQuotaError:L.a,setProcessingStatus:S.o},e)}))(He),ze=a(408),qe=a(409),Ze=a(339),Qe=(a(382),a(383)),Xe=a(130),Ye=a(458),We=a(411),Ge=a(454),Ke=a(455),Je=a(456),$e=a(457),et=a(384),tt=a(412),at=a(413),st=["title","titleId"];function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},it.apply(this,arguments)}function rt(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nt(e,t){var a=e.title,s=e.titleId,i=rt(e,st);return p.createElement("svg",it({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),a?p.createElement("title",{id:s},a):null,Ue||(Ue=p.createElement("path",{d:"M13.4864 1.53836L12.4607 0.512695C12.1192 0.170898 11.6713 0 11.2234 0C10.7755 0 10.3276 0.170898 9.98581 0.512422L0.350418 10.1478L0.00315229 13.271C-0.0405977 13.6642 0.269207 14 0.653934 14C0.67827 14 0.702605 13.9986 0.727488 13.9959L3.8485 13.6511L13.4866 4.01297C14.1699 3.32965 14.1699 2.22168 13.4864 1.53836ZM3.44682 12.8155L0.903035 13.0974L1.18632 10.5498L8.40206 3.33402L10.6653 5.59727L3.44682 12.8155ZM12.8678 3.39445L11.2838 4.97848L9.02057 2.71523L10.6046 1.13121C10.7698 0.966055 10.9896 0.875 11.2234 0.875C11.4572 0.875 11.6767 0.966055 11.8422 1.13121L12.8678 2.15687C13.2088 2.49812 13.2088 3.0532 12.8678 3.39445Z",fill:"#282A35"})))}var ot,lt=p.forwardRef(nt),ct=(a.p,function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={copied:!1,turnOffCopiedCallback:void 0},s}return Object(l.a)(a,[{key:"externalLink",get:function(){return F.i(this.props.file,!1,this.props.customDomain)}},{key:"isAudio",get:function(){return this.props.file.mime_type===F.c.mp3}},{key:"isVideo",get:function(){return this.props.file.mime_type===F.c.mp4}},{key:"previewTooltip",get:function(){return this.isAudio?"Preview audio":this.isVideo?"Preview video":"Preview image"}},{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{className:(this.props.className?this.props.className+" ":"")+"action-round-btns-wrp",children:[!this.props.file.is_folder&&(this.props.file.is_text_based?Object(T.jsx)(Ze.a,{text:"Edit",disabled:this.props.editProcessing||this.props.disabled,children:Object(T.jsx)(b.a,{className:"btn-sm-round",disabled:this.props.editProcessing||this.props.disabled||"pdf"===this.props.file.extension,onClick:function(t){return e.props.handleShowEditModal(t,e.props.file)},children:Object(T.jsx)(lt,{})})}):Object(T.jsx)(Ze.a,{text:this.previewTooltip,disabled:this.props.disabled,children:Object(T.jsxs)(b.a,{className:"btn-sm-round",disabled:this.props.disabled,onClick:function(){return e.props.handleShowImagePreviewModal(e.props.file)},children:[this.isAudio&&Object(T.jsx)(Ge.a,{}),this.isVideo&&Object(T.jsx)(Ke.a,{}),!this.isAudio&&!this.isVideo&&Object(T.jsx)(Je.a,{})]})})),!this.props.file.is_folder&&Object(T.jsx)(Ze.a,{text:this.state.copied?"Copied!":"Copy full path",disabled:this.props.disabled,children:Object(T.jsx)(et.CopyToClipboard,{text:this.externalLink,onCopy:function(){clearTimeout(e.state.turnOffCopiedCallback),e.setState({copied:!0,turnOffCopiedCallback:setTimeout((function(){e.setState({copied:!1,turnOffCopiedCallback:void 0})}),1e3)})},children:Object(T.jsx)(b.a,{className:"btn-sm-round",disabled:this.props.disabled,children:Object(T.jsx)($e.a,{})})})}),Object(T.jsx)(tt.a,{triggerElm:Object(T.jsx)(Ze.a,{text:"More",disabled:this.props.disabled,children:Object(T.jsx)(b.a,{className:"btn-sm-round",disabled:this.props.disabled,children:Object(T.jsx)(at.a,{})})}),disabled:this.props.disabled,children:Object(T.jsxs)(T.Fragment,{children:[!this.props.file.is_folder&&(this.props.file.is_text_based?Object(T.jsx)(b.a,{className:"-menu-item",onClick:function(t){t.preventDefault(),e.props.handleShowEditModal(t,e.props.file)},disabled:this.props.disabled||"pdf"===this.props.file.extension,children:"Edit"}):Object(T.jsx)(b.a,{className:"-menu-item",onClick:function(t){t.preventDefault(),e.props.handleShowImagePreviewModal(e.props.file)},disabled:this.props.disabled,children:this.previewTooltip})),!this.props.file.is_folder&&Object(T.jsx)(b.a,{className:"-menu-item",href:this.externalLink,target:"_blank",disabled:this.props.disabled,children:"Open preview"}),Object(T.jsx)(b.a,{className:"-menu-item",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.props.handleShowRenameModal(e.props.file)},disabled:this.props.disabled,children:"Rename"}),!this.props.file.is_folder&&Object(T.jsx)(b.a,{className:"-menu-item",onClick:function(t){t.preventDefault(),e.props.handleShowMoveModal(e.props.file)},children:"Move to folder"}),Object(T.jsx)("div",{className:"-divider"}),Object(T.jsx)(b.a,{className:"-menu-item -red-text",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.props.handleShowDeleteModal(e.props.file)},disabled:this.props.disabled,children:this.props.file.is_folder?"Delete folder":"Delete"})]})})]})}}]),a}(u.a.Component)),dt=a(171),pt=a(170),ut=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).displayNameTooltip=void 0,s.validFileName=void 0,s.timeoutId=void 0,s.handleClickFolder=function(e){e.preventDefault(),e.stopPropagation(),s.props.editProcessing||s.action_is_disabled||s.props.handleEnterFolder(s.props.file)},s.handleCloseError=function(){s.props.deleteFileUploaded(s.props.file)},s.state={displaySuccess:!1,displayAction:"undefined"===typeof s.props.processing_status,displayError:!(s.props.processing_status!==y.a.Error)},s.transitionEndUploaded=s.transitionEndUploaded.bind(Object(Xe.a)(s)),s.validFileName=F.o(s.props.file.base_name),s.displayNameTooltip=s.validFileName!==s.props.file.base_name,s.timeoutId=void 0,s}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.file&&this.props.file.base_name!==e.file.base_name&&(this.validFileName=F.o(e.file.base_name),this.displayNameTooltip=this.validFileName!==e.file.base_name),!0}},{key:"componentWillUnmount",value:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.props.file.processing_status&&!this.props.file.processing&&this.props.setProcessingStatus(this.props.file,void 0)}},{key:"componentDidUpdate",value:function(e,t,a){if(this.props.processing_status!==e.processing_status)switch(this.props.processing_status){case y.a.NewFolder:case y.a.Uploaded:this.setState({displaySuccess:!0,displayError:!1,displayAction:!1});break;case y.a.Error:this.setState({displayError:!0,displaySuccess:!1,displayAction:!1});break;default:"undefined"===typeof this.props.processing_status&&this.setState({displayError:!1,displaySuccess:!1,displayAction:!0})}}},{key:"transitionEndUploaded",value:function(){var e=this;this.state.displaySuccess&&(this.timeoutId=setTimeout((function(){e.timeoutId=void 0,e.setState({displaySuccess:!1}),e.props.setProcessingStatus(e.props.file,void 0)}),this.props.file.is_folder?2500:4e3))}},{key:"isIndex",get:function(){return"index.html"===this.props.file.base_name_lowercased&&this.props.file.path===this.props.space.id+"/index.html"}},{key:"externalLink",get:function(){return F.i(this.props.file,!0,this.props.customDomain)}},{key:"action_is_disabled",get:function(){return"DELETED"===this.props.space.state||"BANNED"===this.props.space.state}},{key:"render",value:function(){var e=this;return this.props.file.processing?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:this.displayNameTooltip?Object(T.jsx)("div",{className:"w3s-disabled-color cursor-default -overflow-text",children:Object(T.jsx)(Ze.a,{text:this.props.file.base_name,fileName:!0,children:this.validFileName})}):Object(T.jsx)("div",{className:"w3s-disabled-color cursor-default -overflow-text",children:this.validFileName})}),Object(T.jsx)("td",{className:"-tablemobile w3s-text-align-right cursor-default w3s-disabled-color",children:D.a(this.props.file.size)}),Object(T.jsx)("td",{className:"-tablemobile w3s-text-align-right cursor-default w3s-disabled-color",children:this.props.file.last_modified&&Object(T.jsx)(Ze.a,{text:Object(v.b)(this.props.file.last_modified),children:Object(We.b)(this.props.file.last_modified)})}),this.props.processing_status===y.a.Error&&Object(T.jsx)("td",{children:Object(T.jsxs)("div",{className:(this.state.displayError?"-action-in-visible ":"")+"d-flex justify-content-end align-items-center w3s-disabled-color -action-in",children:[Object(T.jsx)(Ze.a,{text:this.props.file.processing_status_error,children:Object(T.jsx)(dt.a,{})}),Object(T.jsx)(Ze.a,{text:"Close item",children:Object(T.jsx)("button",{className:"ml-3",children:Object(T.jsx)("span",{className:"close pr-2",onClick:this.handleCloseError,children:"x"})})})]})}),this.props.processing_status!==y.a.Error&&Object(T.jsx)("td",{children:Object(T.jsxs)("div",{className:"pr-1 w3s-disabled-color d-flex align-items-center justify-content-end",children:[Object(T.jsx)("span",{className:"mr-2",children:"Uploading..."}),Object(T.jsx)(E.g,{size:E.g.utils.size.md})]})})]}):this.props.file.is_folder?Object(T.jsxs)("tr",{className:"folder-row"+(this.props.editProcessing||this.action_is_disabled?" disabled":""),children:[Object(T.jsx)("td",{onClick:this.handleClickFolder,children:Object(T.jsxs)(b.a,{variant:"std",className:"btn-link btn-inline folder-name-table-cell w3s-black-color -overflow-text",onClick:this.handleClickFolder,disabled:this.props.editProcessing||this.action_is_disabled,children:[Object(T.jsx)(Pe.a,{}),this.props.file.name]})}),Object(T.jsx)("td",{className:"-tablemobile w3s-text-align-right",onClick:this.handleClickFolder,children:"-"}),Object(T.jsx)("td",{className:"-tablemobile w3s-text-align-right",onClick:this.handleClickFolder,children:"-"}),this.props.processing_status===y.a.NewFolder?Object(T.jsx)("td",{className:(this.state.displaySuccess?"-action-in-visible ":"")+"w3s-text-align-right -action-in",onClick:this.handleClickFolder,onTransitionEnd:this.transitionEndUploaded,children:Object(T.jsx)(pt.a,{})}):Object(T.jsx)("td",{className:"w3s-text-align-right",onClick:this.handleClickFolder,children:Object(T.jsx)(ct,Object(_.a)({className:"-action-in "+(this.state.displayAction?"-action-in-visible":""),disabled:this.action_is_disabled},this.props))})]}):Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[this.props.file.is_text_based||this.action_is_disabled?this.displayNameTooltip?Object(T.jsx)(Ze.a,{text:this.props.file.base_name,fileName:!0,children:Object(T.jsx)(b.a,{variant:"std",className:"btn-link btn-inline w3s-black-color -overflow-text",onClick:function(t){return e.props.handleShowEditModal(t,e.props.file)},disabled:this.props.editProcessing||this.action_is_disabled||"pdf"===this.props.file.extension,children:this.validFileName})}):Object(T.jsx)(b.a,{variant:"std",className:"btn-link btn-inline w3s-black-color -overflow-text",onClick:function(t){return e.props.handleShowEditModal(t,e.props.file)},disabled:this.props.editProcessing||this.action_is_disabled||"pdf"===this.props.file.extension,children:this.validFileName}):this.displayNameTooltip?Object(T.jsx)(Ze.a,{text:this.props.file.base_name,fileName:!0,children:Object(T.jsx)("a",{className:"w3s-black-color -overflow-text",href:this.externalLink,target:"_blank",rel:"noopener noreferrer",children:this.validFileName})}):Object(T.jsx)("a",{className:"w3s-black-color -overflow-text",href:this.externalLink,target:"_blank",rel:"noopener noreferrer",children:this.validFileName}),this.isIndex&&Object(T.jsx)(Ze.a,{text:"This will be used as the home page for visitors to your space",disabled:this.action_is_disabled,children:Object(T.jsx)(Ye.a,{className:"index-star"})})]}),Object(T.jsx)("td",{className:"-tablemobile cursor-default w3s-text-align-right",children:D.a(this.props.file.size)}),Object(T.jsx)("td",{className:"-tablemobile cursor-default w3s-text-align-right",children:this.props.file.last_modified?Object(T.jsx)(Ze.a,{text:Object(v.b)(this.props.file.last_modified),disabled:this.action_is_disabled,children:Object(We.b)(this.props.file.last_modified)}):"-"}),this.props.processing_status&&this.props.processing_status===y.a.Uploaded&&Object(T.jsx)("td",{children:Object(T.jsxs)("div",{className:(this.state.displaySuccess?"-action-in-visible ":"")+"d-flex align-items-center justify-content-end pr-2 -action-in",onTransitionEnd:this.transitionEndUploaded,children:[Object(T.jsx)("span",{className:"mr-2",children:"Uploaded"}),Object(T.jsx)(pt.a,{})]})}),(!this.props.processing_status||this.props.processing_status!==y.a.Uploaded)&&Object(T.jsx)("td",{className:"w3s-text-align-right",children:Object(T.jsx)(ct,Object(_.a)({className:"-action-in "+(this.state.displayAction?"-action-in-visible":""),disabled:this.action_is_disabled},this.props))})]})}}]),a}(u.a.Component),ht=Object(k.b)((function(e){return{}}),(function(e){return Object(w.bindActionCreators)({deleteFileUploaded:S.c,setProcessingStatus:S.o},e)}))(ut),ft=a(18),bt=["title","titleId"];function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},jt.apply(this,arguments)}function mt(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ot(e,t){var a=e.title,s=e.titleId,i=mt(e,bt);return p.createElement("svg",jt({width:14,height:18,viewBox:"0 0 14 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),a?p.createElement("title",{id:s},a):null,ot||(ot=p.createElement("path",{d:"M13.0043 3.44138L10.0547 0.491774C9.73881 0.17513 9.31015 -0.00316254 8.86289 -0.00392914H1.6875C1.2398 -0.00244209 0.810905 0.176307 0.494658 0.493213C0.178412 0.810118 0.000555304 1.23938 0 1.68709L0 16.3121C0 16.7596 0.17779 17.1889 0.494257 17.5053C0.810725 17.8218 1.23995 17.9996 1.6875 17.9996H11.8125C12.2601 17.9996 12.6893 17.8218 13.0057 17.5053C13.3222 17.1889 13.5 16.7596 13.5 16.3121V4.6367C13.4993 4.1884 13.321 3.75862 13.0043 3.44138ZM12.2098 4.23943C12.2819 4.31094 12.333 4.40095 12.3574 4.49959H9V1.14216C9.09864 1.16655 9.18865 1.21764 9.26016 1.28982L12.2098 4.23943ZM11.8125 16.8746H1.6875C1.53832 16.8746 1.39524 16.8153 1.28975 16.7098C1.18426 16.6043 1.125 16.4613 1.125 16.3121V1.68709C1.125 1.5379 1.18426 1.39483 1.28975 1.28934C1.39524 1.18385 1.53832 1.12459 1.6875 1.12459H7.875V4.78084C7.87472 4.89172 7.89636 5.00156 7.93866 5.10406C7.98096 5.20655 8.0431 5.29967 8.12151 5.37808C8.19991 5.45648 8.29304 5.51862 8.39553 5.56093C8.49803 5.60323 8.60787 5.62487 8.71875 5.62459H12.375V16.3121C12.375 16.4613 12.3157 16.6043 12.2102 16.7098C12.1048 16.8153 11.9617 16.8746 11.8125 16.8746ZM10.125 10.5465V10.8277C10.125 10.9396 10.0806 11.0469 10.0014 11.126C9.92232 11.2051 9.81501 11.2496 9.70312 11.2496H7.3125V13.6402C7.3125 13.7521 7.26805 13.8594 7.18894 13.9385C7.10982 14.0176 7.00251 14.0621 6.89062 14.0621H6.60938C6.49749 14.0621 6.39018 14.0176 6.31106 13.9385C6.23195 13.8594 6.1875 13.7521 6.1875 13.6402V11.2496H3.79688C3.68499 11.2496 3.57768 11.2051 3.49856 11.126C3.41945 11.0469 3.375 10.9396 3.375 10.8277V10.5465C3.375 10.4346 3.41945 10.3273 3.49856 10.2482C3.57768 10.169 3.68499 10.1246 3.79688 10.1246H6.1875V7.73396C6.1875 7.62207 6.23195 7.51477 6.31106 7.43565C6.39018 7.35653 6.49749 7.31209 6.60938 7.31209H6.89062C7.00251 7.31209 7.10982 7.35653 7.18894 7.43565C7.26805 7.51477 7.3125 7.62207 7.3125 7.73396V10.1246H9.70312C9.81501 10.1246 9.92232 10.169 10.0014 10.2482C10.0806 10.3273 10.125 10.4346 10.125 10.5465Z",fill:"#282A35"})))}var vt,_t=p.forwardRef(Ot),gt=(a.p,function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handleClick=function(e){e.preventDefault(),s.props.handleClick(e)},s.state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(T.jsx)(Ze.a,{text:"Create an empty text file",disabled:this.props.loading||this.props.disabled,children:Object(T.jsxs)("div",{className:"create-file-button",children:[Object(T.jsx)("div",{className:"d-none d-md-flex",children:Object(T.jsx)(E.a,{variant:"secondary",onClick:this.handleClick,disabled:this.props.loading||this.props.disabled,children:"New file"})}),Object(T.jsx)(b.a,{className:"btn-md-round d-sm-flex d-md-none green-border",variant:"flat",onClick:this.handleClick,disabled:this.props.loading||this.props.disabled,children:Object(T.jsx)(_t,{})})]})})}}]),a}(u.a.Component)),xt=["title","titleId"];function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yt.apply(this,arguments)}function wt(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ct(e,t){var a=e.title,s=e.titleId,i=wt(e,xt);return p.createElement("svg",yt({width:20,height:16,viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),a?p.createElement("title",{id:s},a):null,vt||(vt=p.createElement("path",{d:"M18.125 3H10.625L8.49102 0.866016C8.37492 0.749949 8.2371 0.657886 8.08543 0.595085C7.93375 0.532283 7.77119 0.499974 7.60703 0.5H1.875C1.37772 0.5 0.900805 0.697544 0.549175 1.04917C0.197544 1.40081 0 1.87772 0 2.375L0 13.625C0 14.1223 0.197544 14.5992 0.549175 14.9508C0.900805 15.3025 1.37772 15.5 1.875 15.5H18.125C18.6223 15.5 19.0992 15.3025 19.4508 14.9508C19.8025 14.5992 20 14.1223 20 13.625V4.875C20 4.37772 19.8025 3.90081 19.4508 3.54917C19.0992 3.19754 18.6223 3 18.125 3ZM18.75 13.625C18.75 13.7908 18.6842 13.9497 18.5669 14.0669C18.4497 14.1842 18.2908 14.25 18.125 14.25H1.875C1.70924 14.25 1.55027 14.1842 1.43306 14.0669C1.31585 13.9497 1.25 13.7908 1.25 13.625V2.375C1.25 2.20924 1.31585 2.05027 1.43306 1.93306C1.55027 1.81585 1.70924 1.75 1.875 1.75H7.60703L9.74102 3.88398C9.85711 4.00005 9.99493 4.09211 10.1466 4.15492C10.2983 4.21772 10.4608 4.25003 10.625 4.25H18.125C18.2908 4.25 18.4497 4.31585 18.5669 4.43306C18.6842 4.55027 18.75 4.70924 18.75 4.875V13.625ZM13.2617 8.625H10.6055V5.96875C10.6055 5.84443 10.5561 5.7252 10.4682 5.63729C10.3803 5.54939 10.261 5.5 10.1367 5.5H9.82422C9.6999 5.5 9.58067 5.54939 9.49276 5.63729C9.40485 5.7252 9.35547 5.84443 9.35547 5.96875V8.625H6.69922C6.5749 8.625 6.45567 8.67439 6.36776 8.76229C6.27985 8.8502 6.23047 8.96943 6.23047 9.09375V9.40625C6.23047 9.53057 6.27985 9.6498 6.36776 9.73771C6.45567 9.82561 6.5749 9.875 6.69922 9.875H9.35547V12.5312C9.35547 12.6556 9.40485 12.7748 9.49276 12.8627C9.58067 12.9506 9.6999 13 9.82422 13H10.1367C10.261 13 10.3803 12.9506 10.4682 12.8627C10.5561 12.7748 10.6055 12.6556 10.6055 12.5312V9.875H13.2617C13.386 9.875 13.5053 9.82561 13.5932 9.73771C13.6811 9.6498 13.7305 9.53057 13.7305 9.40625V9.09375C13.7305 8.96943 13.6811 8.8502 13.5932 8.76229C13.5053 8.67439 13.386 8.625 13.2617 8.625Z",fill:"#282A35"})))}var Nt,St=p.forwardRef(Ct),kt=(a.p,function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handleClick=function(e){e.preventDefault();var t=P.c(s.props.main_state,s.props.space,"folder");if("0"!==t.code)return"quota"===t.context?s.props.addQuotaError(t):s.props.addModal({id:Object(v.e)(),dismissed:!1,type:"error",header:Object(T.jsx)(T.Fragment,{children:"Space temporarily closed"}),body:Object(T.jsx)(T.Fragment,{children:t.description}),dismissButtonText:"Got it"}),void s.setState({loading:!1});s.props.onClick(e)},s.state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(T.jsx)(Ze.a,{text:"Create a new folder",disabled:this.props.disabled,children:Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"d-none d-md-flex",children:Object(T.jsx)(E.a,{variant:"tertiary",onClick:this.handleClick,disabled:this.props.disabled,children:"New folder"})}),Object(T.jsx)(b.a,{className:"btn-md-round d-sm-flex d-md-none",variant:"tertiary",onClick:this.handleClick,disabled:this.props.disabled,children:Object(T.jsx)(St,{})})]})})}}]),a}(u.a.Component)),Ft=Object(k.b)((function(e){return{main_state:e.main}}),(function(e){return Object(w.bindActionCreators)({addModal:N.a,addQuotaError:L.a},e)}))(kt),Et=a(126),Mt=(a(459),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handleClose=function(){s.props.close()},s.state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(T.jsx)(ae.a,{show:this.props.show,size:"lg",className:"quota-error-modal",title:this.props.meta.title,displayCancel:!1,okText:"Got it",handleClose:this.handleClose,handleOk:this.handleClose,children:this.props.meta.contents})}}]),a}(u.a.Component)),It=a(441),Pt=["title","titleId"];function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Dt.apply(this,arguments)}function Lt(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Tt(e,t){var a=e.title,s=e.titleId,i=Lt(e,Pt);return p.createElement("svg",Dt({width:25,height:18,viewBox:"0 0 25 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),a?p.createElement("title",{id:s},a):null,Nt||(Nt=p.createElement("path",{d:"M12.207 5.58203C12.0234 5.39844 11.7266 5.39844 11.543 5.58203L7.70312 9.42188C7.51953 9.60547 7.51953 9.90234 7.70312 10.0859L7.92578 10.3086C8.10938 10.4922 8.40625 10.4922 8.58984 10.3086L11.2539 7.64453V13.5312C11.2539 13.7891 11.4648 14 11.7227 14H12.0352C12.293 14 12.5039 13.7891 12.5039 13.5312V7.64453L15.168 10.3086C15.3516 10.4922 15.6484 10.4922 15.832 10.3086L16.0547 10.0859C16.2383 9.90234 16.2383 9.60547 16.0547 9.42188L12.207 5.58203ZM22.332 8.32812C22.4414 7.94141 22.5 7.53906 22.5 7.125C22.5 4.70703 20.543 2.75 18.125 2.75C17.4727 2.75 16.8398 2.89063 16.25 3.17188C15.0156 1.41406 12.957 0.25 10.625 0.25C6.9375 0.25 3.91797 3.16016 3.75781 6.82031C1.53125 7.60156 0 9.71484 0 12.125C0 15.2344 2.51562 17.75 5.625 17.75H20C22.7617 17.75 25 15.5156 25 12.75C25 10.9141 23.9922 9.20312 22.332 8.32812ZM20 16.5H5.625C3.20703 16.5 1.25 14.543 1.25 12.125C1.25 9.90625 2.89844 8.07422 5.03906 7.78906C5.01172 7.57031 5 7.34766 5 7.125C5 4.01953 7.51953 1.5 10.625 1.5C12.9805 1.5 14.9961 2.94531 15.8359 5C16.4062 4.38672 17.2188 4 18.125 4C19.8516 4 21.25 5.39844 21.25 7.125C21.25 7.84766 21.0039 8.51562 20.5898 9.04688C22.3828 9.32812 23.75 10.8789 23.75 12.75C23.75 14.8203 22.0703 16.5 20 16.5Z",fill:"white"})))}var At,Rt=p.forwardRef(Tt),Bt=(a.p,a(414)),Ut=function(e,t,a){return a?e.name.toLowerCase()>t.name.toLowerCase()?1:-1:e.name.toLowerCase()<t.name.toLowerCase()?1:-1};!function(e){e[e.Name=1]="Name",e[e.Size=2]="Size",e[e.Modified=3]="Modified"}(At||(At={}));var Ht=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e)).timerID=void 0,s.setEditorLocalStorage=function(e){s.props.setEditorContent({url:"https://".concat(s.state.spaceId,".").concat(Object(v.d)()),file_path:null===e||void 0===e?void 0:e.path,domainNameForSpace:s.domainNameForSpace||null})},s.handleShowMoveModalSingle=function(e){E.n.logDebug("FileBrowser -> handleShowMoveModalSingle() -> file",e),s.setState({showMoveModal:!0,selectedFiles:[e]})},s.handleOpenFolder=function(e){E.n.logDebug("FileBrowser -> handleOpenFolder() -> folder",e),s.props.setSpacePath(e.path)},s.handleFetchFiles=function(){s.props.fetchFiles(s.state.spaceId,s.props.main_state,(function(){s.setState({files_fetched:!0})}))},s.handleShowDeleteModal=function(e){s.setState({showDeleteModal:!0,selectedFiles:[e]})},s.handleCloseDeleteModal=function(){s.setState({showDeleteModal:!1,selectedFiles:[]})},s.handleCloseNewFolderModal=function(){s.setState({showNewFolderModal:!1,selectedFiles:[]})},s.handleCloseMoveModal=function(){s.setState({showMoveModal:!1,selectedFiles:[]})},s.handleShowImagePreviewModal=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.setState({showImagePreviewModal:!0,previewImage:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleCloseImagePreviewModal=function(){s.setState({showImagePreviewModal:!1,previewImage:void 0})},s.handleShowEditModal=function(e,t){s.props.setHideTooltip(!0),s.setState({editProcessing:!0,selectedFiles:[t]}),s.setEditorLocalStorage(t),s.props.history.push("/space/".concat(s.state.spaceId,"/editor"))},s.handleCloseEditModal=function(){s.props.setHideTooltip(!1),s.setState({selectedFiles:[],editProcessing:!1})},s.handleShowRenameModal=function(e){s.props.main_state.usage_status._out_of_quota?s.props.addQuotaError({code:"ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED",description:"Your space is temporarily closed, and renaming files/folders is not allowed.",meta:{header_text:"Space temporarily closed"}}):s.setState({showRenameModal:!0,selectedFiles:[e],renameFileName:s.displayFileKey(e.path)})},s.handleShowNewFileModal=function(){s.props.main_state.usage_status._out_of_quota?s.props.addQuotaError({code:"ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED",description:"Your space is temporarily closed, and creating a new file is not allowed.",meta:{header_text:"Space temporarily closed"}}):s.setState({showNewFileModal:!0,selectedFiles:[]})},s.handleShowNewFolderModal=function(){s.setState({showNewFolderModal:!0,selectedFiles:[]})},s.handleCloseRenameModal=function(){s.setState({showRenameModal:!1,selectedFiles:[]})},s.handleCloseNewFileModal=function(){s.setState({showNewFileModal:!1,selectedFiles:[]})},s.handleCloseQuotaErrorModal=function(){s.setState({showQuotaErrorModal:!1,quotaErrorMeta:{title:"",contents:""},selectedFiles:[]})},s.handleShowDeleteSpaceModal=function(){s.setState({showDeleteSpaceModal:!0})},s.handleShowResetSpaceModal=function(){var e=P.b(s.props.main_state);"0"===e.code?s.setState({showResetSpaceModal:!0}):s.props.addQuotaError(e)},s.handleCloseDeleteSpaceModal=function(e){E.n.logDebug("FileBrowser -> handleCloseDeleteSpaceModal() -> success: ",e),e?s.props.history.push("/"):s.setState({showDeleteSpaceModal:!1})},s.handleCloseResetSpaceModal=function(e){E.n.logDebug("handleCloseResetSpaceModal -> success: ",e),e?s.props.history.push("/"):s.setState({showResetSpaceModal:!1})},s.displayFileKey=function(e){return e.split("/").splice(1).join("/")},s.clickBreadcrumbItem=function(e){E.n.logDebug("FileBrowser -> clickBreadcrumItem() -> event",e),s.props.setSpacePath(e)},s.clickedTableHeader=function(e,t){s.setState({sortingSelected:e,sortingAscending:t})},s.sortingFunction=function(e,t){return e.is_folder&&!t.is_folder?-1:e.is_folder&&t.is_folder?s.state.sortingSelected===At.Name?Ut(e,t,s.state.sortingAscending):e.name.toLowerCase()>t.name.toLowerCase()?1:-1:s.state.sortingSelected===At.Name?Ut(e,t,s.state.sortingAscending):s.state.sortingSelected===At.Size?e.size===t.size?Ut(e,t,s.state.sortingAscending):s.state.sortingAscending?e.size>t.size?1:-1:e.size<t.size?1:-1:e.last_modified&&t.last_modified?e.last_modified.getTime()===t.last_modified.getTime()?Ut(e,t,s.state.sortingAscending):s.state.sortingAscending?e.last_modified<t.last_modified?1:-1:e.last_modified>t.last_modified?1:-1:e.last_modified?1:-1};var i=e.match.params.spaceId;return e.selectedPath&&""!==e.selectedPath||e.setSpacePath(i+"/"),s.state={files_fetched:!1,selectedFiles:[],showDeleteModal:!1,showRenameModal:!1,showNewFolderModal:!1,showDeleteSpaceModal:!1,showResetSpaceModal:!1,showImagePreviewModal:!1,showMoveModal:!1,showNewFileModal:!1,renameFileName:"",previewImage:void 0,copied:!1,status:"",fileUploading:!1,editProcessing:!1,spaceId:i,showQuotaErrorModal:!1,quotaErrorMeta:{title:"",contents:""},sortingSelected:At.Modified,sortingAscending:!0},s}return Object(l.a)(a,[{key:"space",get:function(){var e=this,t=this.props.spaces.filter((function(t){return t.id===e.state.spaceId}));return t.length>0?t[0]:void 0}},{key:"componentDidMount",value:function(){"undefined"!==typeof this.space&&"DELETED"!==this.space.state&&"BANNED"!==this.space.state?(this.props.setDisplayFooter(!0),this.props.setDisplayHeader(!0),this.handleFetchFiles()):this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){this.timerID&&clearInterval(this.timerID)}},{key:"hasDomainForSpace",get:function(){var e=this;return this.props.domains.filter((function(t){return t.spaceId===e.state.spaceId})).length>0}},{key:"domainNameForSpace",get:function(){var e=this,t=this.props.domains.filter((function(t){return t.spaceId===e.state.spaceId&&t.status.ORDER_PROCESSING_COMPLETED}));if(t.length>0)return t[0].domainName}},{key:"spaceUrl",get:function(){var e=this.domainNameForSpace;return e?"https://".concat(e):"https://".concat(this.state.spaceId,".").concat(Object(v.d)())}},{key:"itemsDisplayed",get:function(){var e=this,t=[];if("undefined"!==typeof this.space){var a,s,r=this.props.selectedPath.split("/").length;t=this.space.files.filter((function(t){return t.path.includes(e.props.selectedPath)&&r===t.path.split("/").length}));var n=this.space.folders.filter((function(t){return t.path.includes(e.props.selectedPath)&&r===t.path.split("/").length-1}));(a=t).push.apply(a,Object(i.a)(n));var o=this.props.files_uploaded.filter((function(t){return t.path.includes(e.props.selectedPath)&&r===t.path.split("/").length}));(s=t).push.apply(s,Object(i.a)(o))}return t}},{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{className:"w3s-file-browser",children:["undefined"===typeof this.space&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(h.a,{children:Object(T.jsx)(f.a,{className:"w3s-back-col",children:Object(T.jsx)(Et.a,{text:"Back to all spaces",to:"/",handleOnClick:function(){localStorage.removeItem("w3s-editor"),e.props.resetFileUpload()}})})}),Object(T.jsx)(h.a,{children:Object(T.jsx)(f.a,{className:"file-table-refresh-col",children:Object(T.jsx)("h1",{className:"file-browser-header",children:"Space not found"})})}),Object(T.jsx)(h.a,{children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("div",{style:{padding:"20px 0"},children:"Sorry, we cannot find the space you were looking for."}),Object(T.jsx)(E.a,{variant:"primary",as:"a",href:"/",children:"Back"})]})})]}),"undefined"!==typeof this.space&&this.state.files_fetched&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(h.a,{children:Object(T.jsx)(f.a,{className:"w3s-back-col",children:Object(T.jsx)(Et.a,{text:"Back to all spaces",to:"/",handleOnClick:function(){localStorage.removeItem("w3s-editor"),e.props.resetFileUpload()}})})}),Object(T.jsxs)(h.a,{children:[Object(T.jsx)(f.a,{className:"file-table-refresh-col col-md-3 col-12",children:Object(T.jsx)("h1",{className:"file-browser-header",children:"Files"})}),Object(T.jsx)(f.a,{className:"file-table-refresh-col col-9 d-none d-md-block",children:Object(T.jsxs)(h.a,{className:"direction-reverse",children:[Object(T.jsx)("div",{className:"btn-wrp -mobile-mr",children:Object(T.jsx)(It.a,{variant:"dark",can_be_upgraded:this.props.main_state.subscription_plan.can_be_upgraded})}),Object(T.jsx)("div",{className:"btn-wrp mr-12",children:this.hasDomainForSpace?Object(T.jsx)(E.a,{variant:"tertiary",onClick:function(){E.c.sendEvent({name:'Clicked on "'.concat("free"===e.props.main_state.subscription_plan.name?"My domain":"My domains",'" on ').concat(e.props.main_state.subscription_plan.cname," plan"),category:"Domains"}),e.props.history.push("/domains")},children:"free"===this.props.main_state.subscription_plan.name?"My domain":"My domains"}):Object(T.jsx)(E.a,{variant:"tertiary",onClick:function(){E.c.sendEvent({name:'Clicked on "Get a domain" on '.concat(e.props.main_state.subscription_plan.cname," plan"),category:"Domains"}),e.props.history.push("/domains/start/".concat(e.state.spaceId))},children:"Get a domain"})})]})})]}),Object(T.jsx)(h.a,{children:Object(T.jsx)(f.a,{children:Object(T.jsxs)("div",{className:"file-table",children:[Object(T.jsxs)("div",{className:"-header",children:[Object(T.jsxs)("div",{className:"-info-wrapper",children:[Object(T.jsxs)("div",{className:"-header",children:[Object(T.jsx)(Te.a,{size:54,spaceState:this.space.state}),Object(T.jsxs)("div",{className:"-inner-wrapper",children:[Object(T.jsx)("h3",{className:"-title",children:this.state.spaceId}),Object(T.jsx)("p",{children:Object(T.jsx)("a",{href:this.spaceUrl,target:"_blank",rel:"noopener noreferrer",children:this.spaceUrl})})]})]}),Object(T.jsx)("div",{className:"-body",children:Object(T.jsx)("p",{children:this.state.status})})]}),Object(T.jsxs)("div",{className:"-right-btn-wrapper",children:[Object(T.jsx)("div",{className:"btn-wrp mr-12 -mobile-mr",children:Object(T.jsx)(Ze.a,{text:"Reset space",children:Object(T.jsx)(b.a,{variant:"flat",className:"btn-md-round",onClick:this.handleShowResetSpaceModal,children:Object(T.jsx)(m.a,{className:this.props.main_state.loading.includes("fetchFiles")?"loading-spin":""})})})}),Object(T.jsx)("div",{className:"btn-wrp mr-12 -mobile-mr",children:Object(T.jsx)(Ft,{space:this.space,onClick:this.handleShowNewFolderModal,disabled:this.props.main_state.loading.includes("fetchFiles")||this.props.selectedPath.split("/").length>=q.MAX+2})}),Object(T.jsx)("div",{className:"btn-wrp mr-12 -mobile-mr",children:Object(T.jsx)(gt,{handleClick:this.handleShowNewFileModal,disabled:this.props.main_state.loading.includes("fetchFiles"),loading:this.props.main_state.loading.includes("fetchFiles")})}),Object(T.jsx)("div",{className:"btn-wrp -mobile",children:Object(T.jsx)(R,{space:this.space,active_path:this.props.selectedPath,innerProps:{noDragEventsBubbling:!0},lite:!0,children:Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"d-none d-md-flex",children:Object(T.jsx)(E.a,{variant:"primary",children:"Upload files"})}),Object(T.jsx)("div",{children:Object(T.jsx)(Ze.a,{text:"Upload files",children:Object(T.jsx)(b.a,{className:"btn-md-round d-sm-flex d-md-none btn-color-green",variant:"flat",children:Object(T.jsx)(Rt,{})})})})]})})})]})]}),Object(T.jsx)("div",{className:"-body",children:Object(T.jsx)(R,{space:this.space,active_path:this.props.selectedPath,innerProps:{noClick:!0,noKeyboard:!0},children:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"rounded-table-wrapper "+(0===this.itemsDisplayed.length?"empty":""),children:Object(T.jsxs)(j.a,{hover:!0,className:"rounded-table",children:[Object(T.jsxs)("thead",{children:[Object(T.jsx)("tr",{children:Object(T.jsx)("th",{colSpan:4,className:"breadcrumb-header white-background",children:Object(T.jsx)(Ce,{path:this.props.selectedPath.split("/"),folderIsSelected:this.props.selectedPath!==this.state.spaceId+"/",spaceId:this.state.spaceId,handleClickItem:this.clickBreadcrumbItem})})}),Object(T.jsxs)("tr",{children:[Object(T.jsx)(Bt.a,{className:"first-tablemobile",selected:this.state.sortingSelected===At.Name,hideSortIndicators:!0,onClick:function(t){e.clickedTableHeader(At.Name,t)},children:Object(T.jsx)("div",{className:"mr-2",children:"Name"})}),Object(T.jsx)(Bt.a,{selected:this.state.sortingSelected===At.Size,className:"-tablemobile",rightAlignText:!0,hideSortIndicators:!0,onClick:function(t){return e.clickedTableHeader(At.Size,t)},children:Object(T.jsx)("div",{className:"mr-2",children:"Size"})}),Object(T.jsx)(Bt.a,{selected:this.state.sortingSelected===At.Modified,className:"-tablemobile -table-min-width",rightAlignText:!0,hideSortIndicators:!0,onClick:function(t){return e.clickedTableHeader(At.Modified,t)},children:Object(T.jsx)("div",{className:"mr-2",children:"Last modified"})}),Object(T.jsx)("th",{})]})]}),Object(T.jsx)("tbody",{children:this.space&&this.itemsDisplayed.length>0&&this.itemsDisplayed.sort(this.sortingFunction).map((function(t,a){return Object(T.jsx)(ht,{processing_status:t.processing_status,space:e.space,file:t,customDomain:e.domainNameForSpace,handleShowEditModal:e.handleShowEditModal,editProcessing:e.state.editProcessing,handleShowImagePreviewModal:e.handleShowImagePreviewModal,handleShowRenameModal:e.handleShowRenameModal,handleShowDeleteModal:e.handleShowDeleteModal,handleShowMoveModal:e.handleShowMoveModalSingle,handleEnterFolder:e.handleOpenFolder},t.path)}))})]})}),0===this.itemsDisplayed.length&&Object(T.jsxs)("div",{className:"-no-files-banner",children:[Object(T.jsx)(h.a,{children:Object(T.jsx)(f.a,{children:Object(T.jsx)("div",{className:"no-files-banner-icon-circle",children:Object(T.jsx)(O.a,{size:"50"})})})}),Object(T.jsx)(h.a,{children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("h4",{children:"Drop files here to upload"}),Object(T.jsxs)("div",{className:"-subtitle",children:["or use the ",Object(T.jsx)(R,{space:this.space,innerProps:{noDragEventsBubbling:!0},lite:!0,active_path:this.props.selectedPath,children:"Upload files"})," button"]})]})})]}),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Mt,{show:this.state.showQuotaErrorModal,close:this.handleCloseQuotaErrorModal,spaceId:this.state.spaceId,file:this.state.selectedFiles[0],meta:this.state.quotaErrorMeta}),Object(T.jsx)(ie,{show:this.state.showRenameModal,close:this.handleCloseRenameModal,file:this.state.selectedFiles[0],spaceId:this.state.spaceId,active_path:this.props.selectedPath}),Object(T.jsx)(me,{show:this.state.showNewFileModal,close:this.handleCloseNewFileModal,space:this.space,spaceId:this.state.spaceId,active_path:this.props.selectedPath}),Object(T.jsx)(_e,{show:this.state.showNewFolderModal,close:this.handleCloseNewFolderModal,path:this.props.selectedPath,spaceId:this.state.spaceId,existingFolders:this.space.folders,defaultName:te(this.props.selectedPath,this.space.folders)}),Object(T.jsx)(xe,{show:this.state.showDeleteModal,close:this.handleCloseDeleteModal,file:this.state.selectedFiles[0],spaceId:this.state.spaceId}),Object(T.jsx)(Ve,{show:this.state.showMoveModal,close:this.handleCloseMoveModal,files:this.state.selectedFiles,spaceId:this.state.spaceId,space_folders:this.space.folders,active_path:this.props.selectedPath}),Object(T.jsx)(ze.a,{show:this.state.showDeleteSpaceModal,close:function(){return e.handleCloseDeleteSpaceModal(!1)},closeWithStatus:this.handleCloseDeleteSpaceModal,spaceId:this.state.spaceId}),this.state.showResetSpaceModal&&Object(T.jsx)(qe.a,{show:!0,close:function(){return e.handleCloseResetSpaceModal(!1)},closeWithStatus:this.handleCloseResetSpaceModal,space_id:this.state.spaceId,resetFileUpload:function(){return e.props.resetFileUpload()}}),this.state.showImagePreviewModal&&Object(T.jsx)(Qe.a,{show:!0,close:this.handleCloseImagePreviewModal,file:this.state.previewImage})]})]})})})]})})}),Object(T.jsxs)(h.a,{className:"d-block d-md-none mt-n4",children:[Object(T.jsx)(f.a,{className:"file-table-refresh-col",children:Object(T.jsx)("div",{className:"btn-wrp -mobile-mr mr-3 expand-upgrade-btn",children:Object(T.jsx)(It.a,{variant:"dark",can_be_upgraded:this.props.main_state.subscription_plan.can_be_upgraded})})}),Object(T.jsx)(f.a,{className:"file-table-refresh-col d-flex expand-upgrade-btn",children:this.hasDomainForSpace?Object(T.jsx)(E.a,{variant:"tertiary",onClick:function(){E.c.sendEvent({name:'Clicked on "'.concat("free"===e.props.main_state.subscription_plan.name?"My domain":"My domains",'" on ').concat(e.props.main_state.subscription_plan.cname," plan"),category:"Domains"}),e.props.history.push("/domains")},children:"free"===this.props.main_state.subscription_plan.name?"My domain":"My domains"}):Object(T.jsx)(E.a,{variant:"tertiary",onClick:function(){E.c.sendEvent({name:'Clicked on "Get a domain" on '.concat(e.props.main_state.subscription_plan.cname," plan"),category:"Domains"}),e.props.history.push("/domains/start/".concat(e.state.spaceId))},children:"Get a domain"})})]})]})]})}}]),a}(u.a.Component);t.default=Object(ft.j)(Object(k.b)((function(e){return{spaces:e.main.spaces,domains:e.domains.orders,main_state:e.main,files_uploaded:e.main.files_uploaded,selectedPath:e.main.space_path}}),(function(e){return Object(w.bindActionCreators)({addQuotaError:L.a,addNotification:C.a,dismissNotification:C.c,updateNotification:C.e,fetchFiles:S.d,setHideTooltip:S.l,resetFileUpload:S.h,setSpacePath:S.p,setDisplayFooter:S.i,setDisplayHeader:S.j,setEditorContent:S.k},e)}))(Ht))}}]);
//# sourceMappingURL=15.c6736af7.chunk.js.map